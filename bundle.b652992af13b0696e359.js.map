{"version":3,"file":"bundle.b652992af13b0696e359.js","mappings":"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","sources":["webpack://ClearField/./node_modules/dayjs/dayjs.min.js","webpack://ClearField/./node_modules/dayjs/plugin/dayOfYear.js","webpack://ClearField/./node_modules/kvdb.io/index.js","webpack://ClearField/./node_modules/node-fetch/browser.js","webpack://ClearField/webpack/bootstrap","webpack://ClearField/webpack/runtime/compat get default export","webpack://ClearField/webpack/runtime/define property getters","webpack://ClearField/webpack/runtime/global","webpack://ClearField/webpack/runtime/hasOwnProperty shorthand","webpack://ClearField/./src/htmlui.js","webpack://ClearField/./src/msg.js","webpack://ClearField/./node_modules/rand-seed/dist/rand-seed.es.js","webpack://ClearField/./src/app.js"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=v;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),l=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?l(1,0):l(31,11);case f:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,l=this;r=Number(r);var $=O.p(h),y=function(t){var e=w(l);return O.w(e.date(e.date()+Math.round(t*r)),l)};if($===f)return this.set(f,this.$M+r);if($===c)return this.set(c,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},$={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||$[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,v=this-M,g=O.m(this,M);return g=($={},$[c]=g/12,$[f]=g,$[h]=g/3,$[o]=(v-m)/6048e5,$[a]=(v-m)/864e5,$[u]=v/n,$[s]=v/e,$[i]=v/t,$)[y]||v,l?g:O.a(g)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[g],w.Ls=D,w.p={},w}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_dayOfYear=t()}(this,(function(){\"use strict\";return function(e,t,n){t.prototype.dayOfYear=function(e){var t=Math.round((n(this).startOf(\"day\")-n(this).startOf(\"year\"))/864e5)+1;return null==e?t:this.add(e-t,\"day\")}}}));","'use strict';\n(function(global, factory) {\n  factory = factory.bind(global)\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global.KVdb = factory())\n}(this, (function() { 'user strict';\nconst fetch = typeof this.window !== 'undefined' ? window.fetch : require('node-fetch');\n\nlet KVdb\n\nclass Bucket {\n  constructor(id, access_token) {\n    this.id = id\n    this.access_token = access_token\n  }\n\n  _fetchParams(opts) {\n    opts = opts || {}\n    const params = {\n      headers: {\n        'Accept': 'application/json'\n      }\n    }\n    if(this.access_token) params.headers['Authorization'] = `Bearer ${this.access_token}`\n    if(opts.type) params.headers['Content-Type'] = opts.type\n    return params\n  }\n\n  async get(key) {\n    return fetch(`${KVdb.BASE_URL}/${this.id}/${key}`, this._fetchParams())\n      .then(checkStatus)\n      .then(res => res.text())\n  }\n\n  async set(key, value, opts) {\n    return fetch(`${KVdb.BASE_URL}/${this.id}/${key}`, {...this._fetchParams(opts), method: 'PUT', body: value})\n      .then(checkStatus)\n      .then(res => res.text())\n  }\n\n  async incr(key, increment) {\n    if(increment > 0) increment = '+' + increment;\n    return fetch(`${KVdb.BASE_URL}/${this.id}/${key}`, {...this._fetchParams(), method: 'PATCH', body: increment})\n      .then(checkStatus)\n      .then(res => res.text())\n  }\n\n  async delete(key) {\n    return fetch(`${KVdb.BASE_URL}/${this.id}/${key}`, {...this._fetchParams(), method: 'DELETE'})\n      .then(res => res.text())\n  }\n\n  async list(opts) {\n    opts = opts || {}\n    const params = new URLSearchParams();\n\n    if(opts.skip) params.append('skip', opts.skip);\n    if(opts.limit) params.append('limit', opts.limit);\n    if(opts.prefix) params.append('prefix', opts.prefix);\n    if(opts.reverse) params.append('reverse', 'true');\n    if(opts.values) params.append('values', 'true');\n    params.append('format', 'json');\n\n    return fetch(`${KVdb.BASE_URL}/${this.id}/?${params.toString()}`, this._fetchParams())\n      .then(checkStatus)\n      .then(res => res.json())\n  }\n\n  async accessToken(opts) {\n    opts = opts || {}\n    const params = new URLSearchParams();\n\n    if(opts.prefix) params.append('prefix', opts.prefix);\n    if(opts.permissions && opts.permissions instanceof Array) params.append('permissions', opts.permissions.join(','));\n    if(opts.ttl) params.append('ttl', opts.ttl);\n\n    return fetch(`${KVdb.BASE_URL}/${this.id}/tokens/`, {...this._fetchParams({type: 'application/x-www-form-urlencoded'}), method: 'POST', body: params.toString()})\n      .then(checkStatus)\n      .then(res => res.json())\n      .then(res => res.access_token)\n  }\n\n  localStorage(opts) {\n    return new KVdbWebStorage(this)\n  }\n}\n\nfunction checkStatus(res) {\n  if(res.ok) {\n    return res;\n  } else {\n    throw Error(`${res.status} - ${res.statusText}`)\n  }\n}\n\n// Emulate Web Storage API (experimental)\nclass KVdbWebStorage {\n  constructor(bucket) {\n    this.bucket = bucket\n  }\n\n  // When passed a number n, this method will return the name of the nth key in the storage.\n  async key(index) {\n    return this.bucket.list({skip: index, limit: 1})\n      .then(keyName => keyName)\n      .catch(err => null)\n  }\n\n  // When passed a key name, will return that key's value.\n  async getItem(keyName) {\n    return this.bucket.get(keyName)\n      .then(keyValue => keyValue)\n      .catch(err => null)\n  }\n\n  // When passed a key name and value, will add that key to the storage, or update that key's value if it already exists.\n  async setItem(keyName, keyValue) {\n    return this.bucket.set(keyName, keyValue)\n  }\n\n  // When passed a key name, will remove that key from the storage.\n  async removeItem(keyName) {\n    return this.bucket.delete(keyName)\n  }\n\n  // Returns an integer representing the number of data items stored in the Storage object.\n  async length() {\n    return this.bucket.list()\n      .then(keys => keys.length)\n      .catch(err => -1)\n  }\n\n  // When invoked, will empty all keys out of the storage.\n  async clear() {\n    const keys = await this.bucket.list()\n    const waiting = keys.map(key => this.bucket.delete(key))\n    return Promise.all(waiting)\n  }\n}\n\nfunction executeCallback(promise, callback) {\n  if(callback) {\n    promise.then(\n      function(result) {\n        callback(null, result);\n      },\n      function(error) {\n        callback(error);\n      }\n    );\n  }\n}\n\nlet localForageDriver = {}\n\nfunction getLocalForageDriver(localforage) {\n  localForageDriver = {\n    _driver: KVdb.LOCALFORAGE_DRIVER,\n    _support: true,\n    _initStorage: function(options) {\n      this.bucket = options.bucket\n      var dbInfo = {}\n      dbInfo.serializer = localforage.getSerializer()\n      this._dbInfo = dbInfo\n      return Promise.resolve()\n    },\n    async clear(callback) {\n      const bucket = this._config.bucket\n\n      const promise = bucket.list()\n        .then(keys => keys.map(key => bucket.delete(key)))\n        .then(deletes => Promise.all(deletes))\n\n      executeCallback(promise, callback)\n      return promise\n    },\n    async getItem(key, callback) {\n      const bucket = this._config.bucket\n      const dbInfo = this._dbInfo\n\n      const promise = Promise.all([bucket.get(key), dbInfo.serializer])\n        .then(([value, serializer]) => serializer.deserialize(value))\n\n      executeCallback(promise, callback)\n      return promise\n    },\n    async iterate(iterator, callback) {\n      const bucket = this._config.bucket\n      const dbInfo = this._dbInfo\n\n      const promise = Promise.all([bucket.list({values: true}), dbInfo.serializer])\n        .then(([keyValues, serializer]) => keyValues.map(([k, v]) => [k, serializer.deserialize(v)]))\n        .then(keyValues => {\n          let i = 1\n          for(let [key, value] of keyValues) {\n            const res = iterator(value, key, i++)\n            if(res !== void 0) {\n              return res\n            }\n          }\n        })\n\n      executeCallback(promise, callback)\n      return promise\n    },\n    async key(n, callback) {\n      const bucket = this._config.bucket\n      const dbInfo = this._dbInfo\n\n      const promise = Promise.all([bucket.list({skip: index, limit: 1}), dbInfo.serializer])\n        .then(([value, serializer]) => serializer.deserialize(value))\n\n      executeCallback(promise, callback)\n      return promise\n    },\n    async keys(callback) {\n      const bucket = this._config.bucket\n\n      const promise = bucket.list()\n        .then(keys => keys)\n\n      executeCallback(promise, callback)\n      return promise\n    },\n    async length(callback) {\n      const bucket = this._config.bucket\n\n      const promise = bucket.list()\n        .then(keys => keys.length)\n\n      executeCallback(promise, callback)\n      return promise\n    },\n    async removeItem(key, callback) {\n      const bucket = this._config.bucket\n\n      const promise = bucket.delete(key)\n\n      executeCallback(promise, callback)\n      return promise\n    },\n    async setItem(key, value, callback) {\n      const bucket = this._config.bucket\n      const dbInfo = this._dbInfo\n\n      const originalValue = value\n      const promise = dbInfo.serializer\n        .then(serializer => {\n          return new Promise((resolve, reject) => {\n            serializer.serialize(value, (value, err) => {\n              if(err) return reject(err)\n\n              return resolve(value)\n            })\n          })\n        })\n        .then(newValue => bucket.set(key, newValue, {type: 'application/json'}))\n        .then(() => originalValue)\n\n      executeCallback(promise, callback)\n      return promise\n    },\n  }\n  localforage.defineDriver(localForageDriver)\n  return localForageDriver\n}\n\n  KVdb = {\n    BASE_URL: 'https://kvdb.io',\n    LOCALFORAGE_DRIVER: 'localForageDriver',\n    bucket: (id, access_token) => new Bucket(id, access_token),\n    Bucket: Bucket,\n    WebStorage: KVdbWebStorage,\n    installLocalForageDriver: getLocalForageDriver,\n  }\n\n  return KVdb\n}))); // end of UMD\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar globalObject = getGlobal();\n\nmodule.exports = exports = globalObject.fetch;\n\n// Needed for TypeScript and Webpack.\nif (globalObject.fetch) {\n\texports.default = globalObject.fetch.bind(globalObject);\n}\n\nexports.Headers = globalObject.Headers;\nexports.Request = globalObject.Request;\nexports.Response = globalObject.Response;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","\r\n// htmlui.js\r\nimport dayjs from 'dayjs'\r\nimport { msg, err } from './msg.js'\r\n\r\n\r\nexport class HUI {\r\n\tstatic gEl( idOrEl ){\r\n\t\tlet el = idOrEl\r\n\t\tif ( typeof idOrEl == 'string' )\r\n\t\t\tel = document.getElementById( idOrEl );\r\n\t\tif ( !(el instanceof HTMLElement )) debugger;\r\n\t\treturn el;\r\n\t}\r\n\tstatic addListener( elId, evttype, fn ){\t\t// add listener to 'el' for 'evtype', that calls 'fn'\r\n\t\tif (typeof fn != 'function') debugger\r\n\t\tlet el = HUI.gEl( elId );\r\n\t\tel.addEventListener( evttype, fn );\r\n\t}\r\n\tstatic toggleAllCarets( ){\t// expand/collapse 'grp_All' and all other .caret elements correspondingly\r\n\t\t\r\n\t\tlet grps = document.getElementsByClassName(\"caret\");\r\n\t\tlet grpAll = HUI.gEl( 'grp_All' );\r\n\t\tgrpAll.classList.toggle(\"caret-down\");\r\n\t\tlet down = grpAll.classList.contains(\"caret-down\");\r\n\t\tfor ( let el of grps ){\r\n\t\t\tif (el != grpAll){\r\n\t\t\t\tlet grp = el.parentElement.querySelector('.nested');\r\n\t\t\t\tif (down){\r\n\t\t\t\t\tif (!el.classList.contains('caret-down')) el.classList.add('caret-down');\r\n\t\t\t\t\tif (!grp.classList.contains(\"active\")) grp.classList.add(\"active\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (el.classList.contains(\"caret-down\")) el.classList.remove(\"caret-down\");\r\n\t\t\t\t\tif (grp.classList.contains(\"active\")) grp.classList.remove(\"active\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstatic toggleList( evt ){\t\t// expand/collapse 'evt.tgt'\r\n\t\tlet el = evt.target;\r\n\t\tif ( !el || !el.classList.contains('caret') ) debugger;\r\n\t\t\r\n\t\tel.parentElement.querySelector(\".nested\").classList.toggle(\"active\");\r\n\t\tel.classList.toggle(\"caret-down\");\r\n\t}\r\n\tstatic popup( html ){\r\n\t\tlet p = HUI.gEl('Popup')\r\n\t\tp.innerHTML = html + '<button id=\"popupClose\"> close </button>'\r\n\t\tp.className = ''\r\n\t\tHUI.addListener( 'popupClose', 'click', ()=>{ HUI.setClass('Popup', 'hide', true )} )\r\n\t}\r\n\tstatic newEl( tag, id, cls, txt ){\r\n\t\tif ( tag==undefined ) tag = 'div';\r\n\t\tif ( id==undefined ) id = '';\r\n\t\tif ( cls==undefined ) cls = '';\r\n\t\tif ( txt==undefined ) txt = '';\r\n\t\t\r\n\t\tlet el = document.createElement( tag );\r\n\t\tif ( id  != '' ) el.id = id;\r\n\t\tif ( cls != '' ) el.className = cls;\r\n\t\tel.innerText = txt;\r\n\t\treturn el;\r\n\t}\r\n\tstatic newSel( id, nms, selected ){\r\n\t\tlet sel = HUI.newEl('select', id )\r\n\t\tfor ( let opt of nms ){\r\n\t\t\tlet nopt = HUI.newOpt( opt )\r\n\t\t\tif (opt==selected) nopt.selected = true\r\n\t\t\tsel.appendChild( nopt )\r\n\t\t}\r\n\t\treturn sel\r\n\t}\r\n\tstatic newOpt( nm ){\r\n\t\tlet opt = HUI.newEl('option', '', '', nm )\r\n\t\topt.value = nm\r\n\t\treturn opt\r\n\t}\r\n\tstatic hasClass( el, cls ){\r\n\t\tel = HUI.gEl( el )\r\n\t\tif ( cls instanceof Array ){\r\n\t\t\tfor ( let c of cls ){\r\n\t\t\t\tif ( el.classList.contains( c ))\r\n\t\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn el.classList.contains( cls )\r\n\t}\r\n\tstatic setClass( el, cls, enable ){\t\t// 'enable'/disable class 'cls' of element 'el'  enable undefined => toggle\r\n\t\tel = HUI.gEl( el )\r\n\t\tif ( cls instanceof Array ){\r\n\t\t\tfor ( let c of cls )\r\n\t\t\t\tHUI.setClass( el, c, enable )\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet hascls = el.classList.contains( cls )\r\n\t\tif (enable==undefined) enable = !hascls\r\n\t\tif ( hascls ){\r\n\t\t\tif (!enable) el.classList.remove( cls );\r\n\t\t} else {\r\n\t\t\tif (enable) el.classList.add( cls );\r\n\t\t}\r\n\t}\r\n\tstatic toggleSel( el ){\t\t\t\t\t// toggle class 'sel' of element 'el'\r\n\t\tel.classList.toggle(\"sel\");\r\n\t}\r\n\tstatic loadSelect( sel, nms ){\t\t\t// load array of 'nms' into html select 'sel'\r\n\t  sel = HUI.gEl( sel )\r\n\t  if ( !nms instanceof Array ) debugger;\r\n\t   var i, L = sel.options.length - 1;\r\n\t   for(i = L; i >= 0; i--) {\r\n\t\t  sel.remove(i);\r\n\t   }\r\n\t   for (var nm of nms){\r\n\t\tvar opt = document.createElement('option');\r\n\t\topt.value = opt.innerHTML = nm;\r\n\t\tsel.appendChild(opt);  \r\n\t   }\r\n\t   sel.selectedIndex = 0;\r\n\t}\r\n\tstatic setExt( fnm, ext ){\t\t// => filename with extension\r\n\t\tfnm = HUI.baseNm( fnm );\r\n\t\treturn fnm + ext;\r\n\t}\r\n\tstatic baseNm( fnm ){\t\t\t\t// => filename without extension\r\n\t\tlet idx = fnm.indexOf('.');\r\n\t\tif (idx >= 0) fnm = fnm.substring(0,idx);\r\n\t\treturn fnm;\r\n\t}\r\n\tstatic isName( tk ){\t\t\t\t// => T, if identifier\r\n\t\tlet res = tk.match(/^\\w+[\\d\\w]*$/i)\r\n\t\treturn res != null\r\n\t}\t\r\n\tstatic isNumber( tk ){\t\t\t\t// => T, if number\r\n\t\tlet res = tk.match(/^-*\\d*\\.?\\d+$/i) \r\n\t\treturn res != null\r\n\t}\r\n\tstatic getDate(){\r\n\t\treturn dayjs().format('D-MMM-YY H:mm')\r\n\t}\r\n\tstatic S( v ){ // value as string of up to 4 digits\r\n\t  let s = v.toString(), dot = s.indexOf('.')\r\n\t  if (dot==1 && s.substring(0,1)=='0') s = s.substring(1)\r\n\t  return dot<0? s : s.substring(0,4)\r\n\t}\r\n}\r\n\r\nexport class GUI {\r\n\tstatic guiCnt = 0\r\n\tconstructor( parId, gnm, str, hide ){\r\n\t\tthis.level = 0\r\n\t\tthis.idcnt = 0\r\n\t\tthis.parId = parId\r\n\t\tthis.par = HUI.gEl( parId )\r\n\t\tif ( this.par==null ) \r\n\t\t\terr( `GUI: element ${parId} not found` )\r\n\t\tthis.nm = str? str : 'G'\r\n\t\tlet grpid = `guiG${GUI.guiCnt}`\r\n\t\tthis.id = `gui${GUI.guiCnt}`\r\n\t\tGUI.guiCnt++\r\n\t\t\r\n\t\tlet grp = HUI.newEl( 'span', grpid, 'gui_group', '' )\r\n\t\tthis.grpnm = HUI.newEl( 'span', '', `gui_grpnm caret`, this.nm )\r\n\t\tthis.bdy = HUI.newEl( 'span', this.id, 'gui_body', '' )\r\n\t\t//grp.appendChild( document.createElement( 'br' ))\r\n\t\tgrp.appendChild( this.grpnm )\r\n\t\tgrp.appendChild( this.bdy )\r\n\t\tthis.par.appendChild( grp )\r\n\t\tthis.grpnm.addEventListener( 'click', (evt)=>{ this.setHidden() })\r\n\t\tthis.setHidden( hide==undefined? false : hide )\t\r\n\t\tthis.items = []\r\n\t}\r\n\tnxtId(){\r\n\t\tthis.idcnt++\r\n\t\treturn `${this.id}_${this.idcnt}`\r\n\t}\r\n\tclearGroup(){\r\n\t\tthis.bdy.innerHTML = ''\r\n\t\tthis.items = []\r\n\t}\r\n\tsetHidden( hide ){\t// transition?\r\n\t\tthis.hidden = hide===undefined? !this.hidden : hide\r\n\t\tthis.bdy.hidden = this.hidden\r\n\t\tHUI.setClass( this.grpnm, 'caret-down', !this.hidden )\r\n\t\tif ( !this.bdy.hidden && typeof this.openFn == 'function' )\r\n\t\t\tthis.openFn( this.grpnm )\r\n\t}\r\n\taddGroup( nm, str, hide, fn ){\r\n\t\tlet gui = new GUI( this.id, nm, str, hide )\r\n\t\tgui.level = this.level+1\r\n\t\tHUI.setClass( gui.grpnm, `glev${gui.level}`, true )\r\n\t\tlet id = this.addItem( '', 'gui', nm, gui, true )\r\n\t\tif (hide) gui.setHidden(hide)\r\n\t\tgui.openFn = fn\r\n\t\treturn gui\r\n\t}\r\n\tresetGroup( gui, nm, str, hide, fn ){\t\t// create 'gui' if undefined, or clear it \r\n\t\tif ( gui == undefined ){ \r\n\t\t\tthis.addBreak()\r\n\t\t\tgui = this.addGroup( nm, str, hide, fn )\r\n\t\t}\r\n\t\tgui.clearGroup()\r\n\t\treturn gui\r\n\t}\r\n\r\n\taddBreak(){\r\n\t\tthis.bdy.appendChild( document.createElement( 'br' ))\r\n\t}\r\n\tfindItm( nm ){\r\n\t\tfor ( let itm of this.items )\r\n\t\t\tif ( itm.nm==nm ) return itm\r\n\t\treturn null\r\n\t}\r\n\tgetVal( nm ){\r\n\t\tlet itm = this.findItm( nm )\r\n\t\tif ( itm==null ) return null\r\n\t\tlet el = HUI.gEl(itm.id)\r\n\t\tswitch (itm.typ){\r\n\t\t\tcase 'checkbox':  \treturn el.checked; break\r\n\t\t\tcase 'div':\t\t\treturn el.innerText; break\r\n\t\t\t//case 'file':\t\tel.parentElement.innerText = val\r\n\t\t\tdefault: \t\t\treturn el.value; break\r\n\t\t}\r\n\t}\r\n\tsetVal( nm, val ){\r\n\t\tlet itm = this.findItm( nm )\r\n\t\tif ( itm==null ) return\r\n\t\tlet el = HUI.gEl(itm.id)\r\n\t\tswitch (itm.typ){\r\n\t\t\tcase 'checkbox':  \tel.checked = val; break\r\n\t\t\tcase 'div':\t\t\tel.innerText = val; break\r\n\t\t\tcase 'file':\t\tel.parentElement.innerText = val; break\r\n\t\t\tdefault: \t\t\tel.value = val; break\r\n\t\t}\r\n\t}\r\n\tshowVal( nm, enab ){\r\n\t\tlet itm = this.findItm( nm )\r\n\t\tif ( itm==null ) return\r\n\t\tlet el = HUI.gEl( itm.id )\r\n\t\tif ( el.parentElement.tagName == 'LABEL' ) el = el.parentElement\r\n\t\tel.hidden = enab==undefined? !el.hidden : enab\r\n\t}\r\n\taddItem( lbl, typ, str, fn ){\r\n\t\tlet id = this.nxtId()\r\n\t\tlet nm = lbl\r\n\t\tif (nm=='') nm = str\r\n\t\tlet itm = { nm:nm, lbl: lbl, typ: typ, str: str, id: id }\r\n\t\tif ( typeof fn == 'function' ) itm.fn = fn\r\n\t\tthis.items.push( itm )\r\n\t\tlet lblcls = 'gui'\r\n\t\t\r\n\t\tlet el = null\r\n\t\tswitch (typ){\r\n\t\t\tcase 'sel': // selector of 'str'=list\r\n\t\t\t\tel = HUI.newSel( itm.id, str )\r\n\t\t\t\tbreak\r\n\t\t\tcase 'gui': // fn is actually the new gui\r\n\t\t\t\titm.gui = fn\r\n\t\t\t\tel = itm.gui.bdy\r\n\t\t\t\tid = el.id\r\n\t\t\t\tbreak\r\n\t\t\tcase 'div':\r\n\t\t\t\tel = HUI.newEl( 'span', id, 'gui guival', str )\r\n\t\t\t\t//let pre = HUI.newEl( 'pre', '', '', str )\r\n\t\t\t\t//el.appendChild( pre )\r\n\t\t\t\tbreak\r\n\t\t\tcase 'checkbox':\r\n\t\t\tcase 'file':\r\n\t\t\t\tlblcls += ' guibx'\r\n\t\t\t\t//fall thru\r\n\t\t\tcase 'number':\r\n\t\t\tcase 'button':\r\n\t\t\tcase 'text':\r\n\t\t\t\tel = HUI.newEl( 'input', id, 'gui' )\r\n\t\t\t\tel.type = typ\r\n\t\t\t\tel.value = str\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\tif ( lbl != '' ){\r\n\t\t\tlet lel = HUI.newEl( 'label', '', lblcls, lbl )\r\n\t\t\tlel.appendChild( el )\r\n\t\t\tel = lel\r\n\t\t}\r\n\r\n\t\tthis.bdy.appendChild( el )\r\n\t\treturn id\r\n\t}\r\n\taddSelector( lbl, filelist, fn  ){\r\n\t\tlet id = this.addItem( lbl, 'sel', filelist, fn )\r\n\t\tif (typeof fn == 'function' ) \r\n\t\t\tHUI.addListener( id, 'change', (evt)=>{ fn( evt.target.value ) } )\r\n\t\treturn id\r\n\t}\r\n\taddLine( lbl, txt, fn ){\r\n\t\tlet id = this.addItem( lbl, 'div', txt, fn )\r\n\t\tif (typeof fn == 'function' ) \r\n\t\t\tHUI.addListener( id, 'click', fn )\r\n\t\treturn id\r\n\t}\r\n\taddCategory( nm, cls, fn, enab ){   // checkbox in <div>\r\n\t\t//let id = this.addCheckbox( nm, fn, true )\r\n\t\tlet id = this.addItem( nm, 'checkbox', '', fn )\r\n\t\t//this.addBreak()\r\n\t\t\r\n\t\tlet lbl = HUI.gEl(id).parentElement\r\n\t\tlbl.className += ' br ' + cls\r\n\t\tif ( typeof fn == 'function' ) \r\n\t\t\tHUI.addListener( id, 'click', fn )\r\n\t}\r\n\taddCheckbox( lbl, fn ){\r\n\t\tlet id = this.addItem( lbl, 'checkbox', '', fn )\r\n\t\tif (typeof fn == 'function' ) \r\n\t\t\tHUI.addListener( id, 'click', fn )\r\n\t\treturn id\r\n\t}\r\n\taddButton( str, fn ){\r\n\t\tlet id = this.addItem( '', 'button', str, fn )\r\n\t\tif (typeof fn == 'function' ) \r\n\t\t\tHUI.addListener( id, 'click', fn )\r\n\t\treturn id\r\n\t}\r\n\taddNumber( lbl, val, fn ){\r\n\t\tlet id = this.addItem( lbl, 'number', val, fn )\r\n\t\tif (typeof fn == 'function' ) \r\n\t\t\tHUI.addListener( id, 'click', fn )\r\n\t\treturn id\r\n\t}\r\n\taddValue( lbl, val ){\r\n\t\tlet id = this.addItem( lbl, 'div', val )\r\n\t\treturn id\r\n\t}\r\n\taddText( lbl, str, fn ){\r\n\t\tlet id = this.addItem( lbl, 'text', str, fn )\r\n\t\tif (typeof fn == 'function' ) \r\n\t\t\tHUI.addListener( id, 'change', (evt) => { \r\n\t\t\t\tfn( evt.target.value ) } )\r\n\t\treturn id\r\n\t}\r\n\taddFile( lbl, str, fn ){\r\n\t\tlet id = this.addItem( lbl, 'file', '', fn )\r\n\t\tlet el = HUI.gEl( id )\r\n\t\tif ( str != '' )\r\n\t\t\tel.accept = str\r\n\t\tif ( typeof fn == 'function' )\r\n\t\t\tHUI.addListener( id, 'change', (evt) => { \r\n\t\t\t\tfn( evt.target.files ) \r\n\t\t\t} )\r\n\t\treturn id\r\n\t}\r\n}","import { HUI } from './htmlui.js'\r\nvar msgEl = 'info'\r\nvar statusEl = 'status'\r\n\r\nexport function msg( s, append ){\r\n  let info = document.getElementById( msgEl )\r\n  if (info)\r\n\t  info.innerHTML = append? info.innerHTML + s : s\r\n  else\r\n\t  err( s )\r\n}\r\n//export function showDialog( options ){\r\nexport function showDialog( {\r\n\tid = 'dlg',\r\n\tcls = 'dlg',\r\n\ttitle = '',\r\n\tdetail = '',\r\n\tbuttons = [ 'Cancel', 'Confirm' ],\r\n\tdefaultId = 0\r\n} = {} ){\r\n\r\n//\tlet id = options.id? options.id : 'dlg'\r\n//\tlet cls = options.type? options.type : 'dlg'\r\n//\tlet title = options.title? options.title : ''\r\n//\tlet detail = options.detail? options.detail : ''\r\n//\tlet buttons = options.buttons? options.buttons : [ 'Cancel', 'Confirm' ]\r\n//\tlet defaultId = options.defaultId? options.defaultId : 0;\r\n\t\r\n\tlet d = HUI.newEl( 'dialog', id, cls, `` ) \r\n\td.returnValue = buttons[ defaultId ]\r\n\td.appendChild( HUI.newEl( 'div', '', '', title ))\r\n\tlet f = HUI.newEl( 'form' )\r\n\tf.method = 'dialog'\r\n\tf.appendChild( HUI.newEl( 'div', '', '', detail ))\r\n\tlet bd = HUI.newEl('div')\r\n\tlet btns = []\r\n\tfor ( let s of buttons ) {\r\n\t\tlet b = HUI.newEl( 'button', '', '', s )\r\n\t\tif (s=='Confirm') b.type = 'submit'\r\n\t\tif (s=='Cancel')  b.type = 'reset'\r\n\t\tbd.appendChild( b )\r\n\t\tbtns.push( { button: b, value: s } )\r\n\t}\r\n\tf.appendChild( bd )\r\n\td.appendChild( f )\r\n\tdocument.body.appendChild( d )\r\n\tfor ( let btn of btns ){\r\n\t\tbtn.button.addEventListener('click', ()=> { d.returnValue = btn.value })\r\n\t}\r\n\td.showModal()\r\n\t//document.body.removeChild( d )\r\n\treturn d.returnValue\r\n}\r\n\r\nexport function err( s ){\r\n\tconsole.log( s )\r\n\tlet opts = {  \r\n\t\ttitle: 'Error:',\r\n\t\tdetail: s,\r\n\t\ttype: 'error',\r\n\t\tbuttons: [ 'cancel', 'debug' ],\r\n\t\tdefaultId: 0\r\n\t}\r\n\tlet res = showDialog( opts )\r\n\tif ( res == 'debug' )  debugger\r\n}\r\nexport function question( s, detail, choices ){\r\n\tlet opts = {  \r\n\t\ttitle: 'Question?',  \r\n\t\tdetail: detail,\r\n\t\ttype: 'question',\r\n\t\tbuttons: choices? choices : [ 'no', 'yes' ]\r\n\t}\r\n\tlet res = showDialog( opts ) \r\n\treturn res\r\n}\r\nexport function statusMsg( s ){\r\n  let stat = document.getElementById( statusEl )\r\n  if (stat)  stat.innerText = s;\r\n}\r\nexport function nameChord( s ){\r\n  let stat = document.getElementById( 'chordName' );\r\n  stat.innerText = s;\r\n}\r\n\r\n","var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},t(r,n)};function r(r,n){if(\"function\"!=typeof n&&null!==n)throw new TypeError(\"Class extends value \"+String(n)+\" is not a constructor or null\");function i(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n,i=function(){function t(){}return t._xfnv1a=function(t){for(var r=2166136261,n=0;n<t.length;n++)r=Math.imul(r^t.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),s=function(t){function n(r){var i=t.call(this)||this;return i.a=n._xfnv1a(r)(),i}return r(n,t),n.prototype.next=function(){var t=this.a+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},n}(i),o=function(t){function n(r){var i=t.call(this)||this,s=n._xfnv1a(r);return i.a=s(),i.b=s(),i.c=s(),i.d=s(),i}return r(n,t),n.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var t=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,t=t+this.d|0,this.c=this.c+t|0,(t>>>0)/4294967296},n}(i),e=function(t){function n(r){var i=t.call(this)||this,s=n._xfnv1a(r);return i.a=s(),i.b=s(),i.c=s(),i.d=s(),i}return r(n,t),n.prototype.next=function(){var t=this.b<<9,r=5*this.a;return r=r<<7|9*(r>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=t,this.d=this.d<<11|this.d>>>21,(r>>>0)/4294967296},n}(i);!function(t){t.sfc32=\"sfc32\",t.mulberry32=\"mulberry32\",t.xoshiro128ss=\"xoshiro128ss\"}(n||(n={}));var u=function(){function t(t,r){void 0===r&&(r=n.sfc32),this.str=t,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(t){return null===t}(t=this.str)||function(t){return void 0===t}(t))return this.wrap();var t;switch(this.prng){case\"sfc32\":return new o(this.str);case\"mulberry32\":return new s(this.str);case\"xoshiro128ss\":return new e(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();export{n as PRNG,u as default};\n","/*---------------  ClearField design\r\n  Offline:\r\n\t1) generate a list of winnable starting positions by:\r\n\t    a) setting random key by name string \"CF_GmX\"\r\n\t\tb) auto-selecting random sequence of 0-neighbor cells until none left\r\n\t\t   E.g. \"CF_Gm77-11\" is seeded with \"CF_Gm77\", then cells are filled with \r\n\t\t     mines as specified probability (e.g. 20%), then 11 'blank' cells are selected in \r\n\t\t\t random order (& clear neighboring cells). \"CF_GM77-11\" represents this start state\r\n\t\tc) the game is auto-played deterministically: if its stalls (i.e. requires a guess) that seed isn't used\r\n\t\t   if it clears the entire board, the sequence of earlier games are tried to find the first that is 'winnable'\r\n\t\t   E.g. CF_GM77-10, CF_Gm77-9, (since CF_Gm77-8 isn't winnable,  CF_Gm77-9 is added to the list)\r\n\t2) cells that were required by the particular winning game sequence (i.e. the cell value allowed the player to\r\n\t\tmark or clear some adjacent cells) are recorded & the non-critical cells are marked as '?' (the game can be won\r\n\t\twithout that information ever being visible)\r\n\t3) winning game descriptions are saved on KVdb.io as ~500 character json entries, with Keys G0000 .. G1060, e.g\r\n\t   E.g. G0003 = \r\n\t   {\r\n\t\t\t\"id\":\"G0003\",\t\t\t// position in sequence of winnable games\r\n\t\t\t\"G\":\"CF_Gm77-9\",\t\t// random number key to reproduce this game\r\n\t\t\t\"nS\":169,\t\t\t\t// number of secret cells in initial position \r\n\t\t\t\"nQ\":124,\t\t\t\t// number of ? cells (info not necessary to win)\r\n\t\t\t\"XSz\":\"20\",\t\t\t\t// dimmensions of playfield\r\n\t\t\t\"YSz\":\"20\",\t\t\t\t// dimmensions of playfield\r\n\t\t\t\"st\":[\t\t\t\t\t// initial state of cells, encoding:\r\n\t\t\t\t\t\t\t\t\t//    1) Mine, 2) Secret or not, 3) ? or  not, & 4) # of neighboring mines\r\n\t\t\t\t\"AEDobbboAAAobboCPDDO\",\r\n\t\t\t\t\"PAAdoppqqedcbbdAEAAC\",\r\n\t\t\t\t\"OdddADAAobbbbbdAQEQD\",\r\n\t\t\t\t\"CoboOpddcoooboeQPCAO\",\r\n\t\t\t\t\"AdboCobbboAoboAAdcoo\",\r\n\t\t\t\t\"ApboAdooboocbdFApbbb\",\r\n\t\t\t\t\"OcbopEAobbbbbcAEpcbb\",\r\n\t\t\t\t\"DpoboAdcbbbbbcodAobb\",\r\n\t\t\t\t\"AAdboocbbooobbbpDqoc\",\r\n\t\t\t\t\"QApbbbbbboAobbbcAEAD\",\r\n\t\t\t\t\"DPcbboocboCpooodPQAP\",\r\n\t\t\t\t\"ADoocpAdddCCACCACPPP\",\r\n\t\t\t\t\"DAOCADDQAAcocpPdccAC\",\r\n\t\t\t\t\"CODDPPPAREdbboAcbcoc\",\r\n\t\t\t\t\"OCEAPCAPDApcccOdccbb\",\r\n\t\t\t\t\"CAQAdocdDPPADOOCAobb\",\r\n\t\t\t\t\"DpdccbbcADEQRAOOCobb\",\r\n\t\t\t\t\"AdbbodpdEAEAAdcoDpcb\",\r\n\t\t\t\t\"ApbodAACEASEqcboAAob\",\r\n\t\t\t\t\"OcbcAEDCDAQAcbboPDcb\"\r\n\t\t\t],\r\n\t\t\t\"diff\":\"E\"\t\t// difficulty of 'E'asy, 'M'edium, 'H'ard, or 'X'pert based on # of secret cells\r\n\t\t}\r\n\t4) Lists of the games in each difficulty group are saved, that index produces a name within the group:\r\n\t     E.g. CF_difficulty.E = [ \"G0003\",\"G0023\",\"G0025\",\"G0028\",\"G0031\", ...\"G1059\" ]\r\n\t\t so game \"E0001\" = \"G0003\" described above\r\n\t5) Since displaying all '?' cells with ? hints at a viable winning sequence (if a cell has a number, it must\r\n\t\tallow you to expose its neighbors at some point), only some are displayed as ?--  the % displayed depends\r\n\t\ton difficulty:  Easy: 0%,  Medium:  20%,  Hard: 50%,  Xpert: 80%  \r\n\tThe result of this pre-processing is that each user will see an identical sequence of winnable games by\r\n\t\tselecting Easy, Medium, Hard, or Expert or Daily\r\n\t\r\n  Online:\r\n\tLocalstorage keeps track of each users position within the game sequences by difficulty\r\n\tThe game can be played to completion, even if Mines are exposed\r\n\t'Hint' highlights a randomly selected cell with a value that provides enough info for at least one safe move.\r\n\t'Daily' plays the game-of-the-day (even if it repeats or is out of order) \r\n\t\r\n\tThe game keeps track of #Error & #Hints\r\n\tIf played to completion, those #s & elapsed time are recorded in localstorage and at KVdb.io:\r\n\t  UGm0001: { U: \"U00327\", gm: \"E0001\", nH: 0, nE: 0, nS: 427 } \r\n\tAt game start, the Best-time (with 0H & 0E) recorded at KVdb is displayed, \r\n\tStatistics are kept at KVdb for each Game:\r\n\t{ gm: \"E0001\", nGms: 8237,\r\n\t  nE: [ \r\n\t\t[  { bestTime: 387, BTuser: \"U00327\", firstUser: \"U00037\", nGms: 1287 }, {...}, {...} ] // nE=0, nH=0,1,2,>2\r\n\t\t[...]  // nE=1, nH=0,1,2,>2\r\n\t\t[...]  // nE=2, nH=0,1,2,>2\r\n\t\t[...]  // nE>2, nH=0,1,2,>2\r\n\t\t]\r\n\t  Cntsbytime0EH: [ ...  ]  // bins of 10s intervals\r\n\t}\r\n\tFor the 0E 0H case, counts of completion times can be kept in bins (& rebinned if necessary) to allow you to report\r\n\t  \"You completed X0032 faster than 32% of players\"\r\n\r\n\tReportable values:\r\n\t  1) # of daily games completed\r\n\t  2) streak of consecutive daily games\r\n\t  3) total games played (by difficulty)\r\n\t  4) streak of games completed \r\n\t  5) streak of 0E 0H games\r\n\t  6) # of games you were first to complete\r\n\t  7) # of games you currently are fastest to complete\r\n\t  Last game:\r\n\t  8) First to complete\r\n\t  9) percentage of players who completed slower (with same E&H)\r\n\t  10) % of players requiring more errors to complete\r\n\t  11) % of players requiring more hints to complete\r\n\tE.g.: \r\n\t  You finished M0089 with fewer errors than 82% of players & fewer hints than 25%\r\n\t  \r\n\tKVdb can also compile a list of records held by each user periodically--  e.g.\r\n\t  You were the first to complete:\r\n\t  Game    Errs Hints\r\n\t  E0037\t\t0\t0\r\n\t  H0923 \t1\t0\r\n\t  X0082\t\t0\t1\r\n\t  You hold the current best time for:\r\n\t   Game    Errs Hints\tTime\r\n\t  E0107\t\t0\t0\t\t1:22\r\n\t  M0292 \t1\t0\t\t8:24\r\n\t  \r\n\tMonetization?\r\n\t\tpay 5$ to unlock more than 1st 30 games in each difficulty?\r\n\t\t(and stop ads?)\r\n -----------------------------*/\r\n\timport { err, msg, statusMsg, question } \t\t\t\tfrom './msg.js'\r\n\timport { HUI, GUI } \t\t\t\t\t\t\t\t\tfrom './htmlui.js'\r\n\timport './gb53.css'\r\n\timport dayjs\t\t\t\t\t\t\t\t\t\t\tfrom 'dayjs'\r\n\timport dayOfYear\t\t\t\t\t\t\t\t\t\tfrom 'dayjs/plugin/dayOfYear'\r\n\timport Rand, {PRNG} \t\t\t\t\t\t\t\t\tfrom 'rand-seed'\r\n\timport * as KVdb\t\t\t\t\t\t\t\t\t\tfrom 'kvdb.io'\r\n\t\r\nexport class App {\r\n\tconstructor( title ){\r\n\t\tthis.title = title\r\n\t\tlet el = HUI.gEl('title')\r\n\t\tif (el) el.innerText = this.title\r\n\t\t\r\n\t\tthis.Version = '1.0_5/28/23'\r\n\t\tdayjs.extend( dayOfYear )\r\n\r\n\t\tthis.registerSW()\t\t// service worker setup\r\n\t\r\n\t\tlet ng = Number( localStorage.getItem( 'nGames' ))\r\n\t\tif ( ng==undefined ) localStorage.setItem( 'nGames', 0 )\r\n\t\tthis.UserName = localStorage.getItem( 'user' )\r\n\t\tif ( this.UserName == undefined ) this.UserName = ''\r\n\t\t\r\n\t\tApp.currApp = this\r\n\t\t\r\n\t\tthis.initMenu()\r\n\t\t\t\t\r\n\t\tthis.maxunwinnable = 30000\t\r\n\t\t\r\n\t\tthis.bucketKey = 'XuwVGZhBjT5dPVZGhsTLKG' \r\n\t\tthis.writeKey = '7z!FkVC&5KD6'\r\n\t\tthis.initDB()\r\n\t\t\r\n\t\tthis.categories = { E: 'Easy', 'M': 'Medium', 'H': 'Hard', 'X':'Expert', 'D':'Daily' }\r\n\t\t// this.Games = {\t\t// nSecret difficulty thresholds\r\n\t\t\t// E: \t{ maxSecret: 191, GameDefs: [] },\t// 0-25% \r\n\t\t\t// M:\t{ maxSecret: 219, GameDefs: [] },\t// 25-50%\r\n\t\t\t// H:\t{ maxSecret: 262, GameDefs: [] },\t// 50-75%\r\n\t\t\t// X:\t{ maxSecret: 400, GameDefs: [] }\t// 75-100%\r\n\t\t// }\r\n\t\t\r\n\r\n\r\n\t\tthis.initGridEncoder()   // define game state translations \r\n\r\n\t\tthis.errCnt = 0\r\n\t\tthis.initListeners()\r\n\t\tmsg( this.title )\r\n\t\tthis.showHelp()\r\n\t}\r\n\tinitListeners(){\r\n\t\tHUI.addListener( 'btnE', 'click', (evt)=>this.nextGame( 'E' ))\r\n\t\tHUI.addListener( 'btnM', 'click', (evt)=>this.nextGame( 'M' ))\r\n\t\tHUI.addListener( 'btnH', 'click', (evt)=>this.nextGame( 'H' ))\r\n\t\tHUI.addListener( 'btnX', 'click', (evt)=>this.nextGame( 'X' ))\r\n\t\tHUI.addListener( 'btnD', 'click', (evt)=>this.nextGame( 'D' ))\r\n\t\tHUI.addListener( 'btnHint', 'click', (evt)=>this.genHint( ))\r\n\t\tHUI.addListener( 'btnQuit', 'click', (evt)=>this.quitGame( ))\r\n\t\tHUI.addListener( 'btnHelp', 'click', (evt)=>this.showHelp( ))\r\n\t\tHUI.addListener( 'btnES', 'click', (evt)=>this.showStats( 'E' ))\r\n\t\tHUI.addListener( 'btnMS', 'click', (evt)=>this.showStats( 'M' ))\r\n\t\tHUI.addListener( 'btnHS', 'click', (evt)=>this.showStats( 'H' ))\r\n\t\tHUI.addListener( 'btnXS', 'click', (evt)=>this.showStats( 'X' ))\r\n\t\tHUI.addListener( 'btnDS', 'click', (evt)=>this.showStats( 'D' ))\r\n\t\tHUI.addListener( 'btnR', 'click', (evt)=>this.showRecords( ))\r\n\t\tHUI.addListener( 'btnNewH', 'click', (evt)=>this.showMenu( evt ))\r\n\t\tHUI.addListener( 'btnNewC', 'click', (evt)=>this.showMenu( evt ))\r\n\t\tHUI.addListener( 'btnNewUR', 'click', (evt)=>this.showMenu( evt ))\r\n\t\tHUI.addListener( 'btnNewCat', 'click', (evt)=>this.showMenu( evt ))\r\n\t\t\r\n\t\tlet tgt = HUI.gEl('lower')\r\n\t\ttgt.addEventListener( 'contextmenu', (evt)=>evt.preventDefault() )\r\n\t\ttgt.addEventListener( 'mouseup', (evt)=>{ this.gridClick( evt ) })\r\n\t\t\r\n\t\ttgt.addEventListener( 'touchstart', (evt)=>{ this.touchstart( evt )}, { passive: false } )\r\n\t\ttgt.addEventListener( 'touchend', (evt)=>{ this.touchend( evt )}, { passive: false } )\r\n\t\ttgt.addEventListener( 'touchmove', (evt)=>{ this.touchmove( evt )}, { passive: false } )\r\n\t\tdocument.addEventListener( 'keydown', (evt)=>{ this.keydown( evt )} )\r\n\t\twindow.addEventListener( 'resize', (evt)=>{ this.resizeApp() } )\r\n\t\tdocument.addEventListener('click', (evt)=>{\tHUI.setClass( 'Popup', 'hide', true ) })\r\n\t}\r\n\tinitGridEncoder(){\r\n\t\t// encode( this.grid[y][x], innerText=='?', hasClass('secret') )\r\n\t\t// idx = (this.grid[y][x]+1) * ((innerText=='?' 1 : 2 ) + (hasClass('secret')? 2 : 0) )\r\n\t\t// maps -1..8,?,S => 0..9 * 1..4 = 0..36\r\n\t\t//                 [ !? !S  ][ ? !S   ][ !? S   ][  ?  S  ]\r\n\t\tthis.gridEncode = 'abcdefghijmnopqrstuvABCDEFGHIJMNOPQRSTUV'\r\n\t\tthis.decodeGridVal = { \r\n\t\t\t'a': -1, 'b': 0, 'c': 1, 'd': 2, 'e': 3, 'f': 4, 'g': 5, 'h': 6, 'i': 7, 'j': 8,\r\n\t\t\t'm': -1, 'n': 0, 'o': 1, 'p': 2, 'q': 3, 'r': 4, 's': 5, 't': 6, 'u': 7, 'v': 8,\r\n\t\t\t'A': -1, 'B': 0, 'C': 1, 'D': 2, 'E': 3, 'F': 4, 'G': 5, 'H': 6, 'I': 7, 'J': 8,\r\n\t\t\t'M': -1, 'N': 0, 'O': 1, 'P': 2, 'Q': 3, 'R': 4, 'S': 5, 'T': 6, 'U': 7, 'V': 8\r\n\t\t}\r\n\t\tthis.decodeQuest = {\r\n\t\t\t'a': 0, 'b': 0, 'c': 0, 'd': 0, 'e': 0, 'f': 0, 'g': 0, 'h': 0, 'i': 0, 'j': 0,\r\n\t\t\t'm': 1, 'n': 1, 'o': 1, 'p': 1, 'q': 1, 'r': 1, 's': 1, 't': 1, 'u': 1, 'v': 1,\r\n\t\t\t'A': 0, 'B': 0, 'C': 0, 'D': 0, 'E': 0, 'F': 0, 'G': 0, 'H': 0, 'I': 0, 'J': 0,\r\n\t\t\t'M': 1, 'N': 1, 'O': 1, 'P': 1, 'Q': 1, 'R': 1, 'S': 1, 'T': 1, 'U': 1, 'V': 1\r\n\t\t}\r\n\t\tthis.decodeSecret = {\r\n\t\t\t'a': 0, 'b': 0, 'c': 0, 'd': 0, 'e': 0, 'f': 0, 'g': 0, 'h': 0, 'i': 0, 'j': 0,\r\n\t\t\t'm': 0, 'n': 0, 'o': 0, 'p': 0, 'q': 0, 'r': 0, 's': 0, 't': 0, 'u': 0, 'v': 0,\r\n\t\t\t'A': 1, 'B': 1, 'C': 1, 'D': 1, 'E': 1, 'F': 1, 'G': 1, 'H': 1, 'I': 1, 'J': 1,\r\n\t\t\t'M': 1, 'N': 1, 'O': 1, 'P': 1, 'Q': 1, 'R': 1, 'S': 1, 'T': 1, 'U': 1, 'V': 1\r\n\t\t}\r\n\t}\r\n\tinitMenu(){\r\n\t\tthis.gui = new GUI( 'header', 'hdr', '_', true )\r\n\r\n\t\tthis.gui.addBreak()\r\n\t\t// this.gui.addButton( 'Easy', \t(evt)=>this.nextGame( 'E' ) ) \r\n\t\t// this.gui.addButton( 'Medium', \t(evt)=>this.nextGame( 'M' ) ) \r\n\t\t// this.gui.addButton( 'Hard', \t(evt)=>this.nextGame( 'H' ) ) \r\n\t\t// this.gui.addButton( 'Expert', \t(evt)=>this.nextGame( 'X' ) ) \r\n\t\t// this.gui.addButton( 'Daily', \t(evt)=>this.nextGame( 'D' ) ) \r\n\t\t// this.gui.addButton( 'Hint', \t(evt)=>this.genHint( ) ) \r\n\r\n\t//\tthis.gui.addValue('Mines:', '* E M' ) //`${this.mines} - ${this.exploded}E - ${this.marked}M` )\r\n\t//\tthis.gui.addButton('Safe', ()=>this.randSafeClick()) \r\n\t\tthis.gui.addButton('Stats', (evt)=>this.showGames(evt) ) \r\n\t\tthis.gui.addButton('Autoplay', (evt)=>this.play( 10 ) ) \r\n\r\n\t\tthis.gui.addNumber('X', 20 )\r\n\t\tthis.gui.addNumber('Y', 20 )\r\n\t\tthis.gui.addNumber('Mine%', 20 )\r\n\t//\tthis.opt.addText( 'Username', this.UserName, (val)=>{ this.updateUser( val ) } )\r\n\r\n\t\tthis.det = this.gui.addGroup('Details','Det', true)\r\n\t//\tthis.gui.addBreak()\r\n\t\tthis.det.addValue( 'Details:', 0 )\r\n\t\t\r\n\t\tthis.mng = this.gui.addGroup('Manage','Mng', true)\r\n\t//\tthis.mng.addNumber( 'nxtID', 0 )\r\n\t\tthis.mng.addNumber( 'GmStart', 0 )\r\n\t\tthis.mng.addNumber( 'Batch', 100 )\r\n\t\tthis.mng.addButton( 'Save', (evt)=>this.findWinnable( evt ) ) \r\n\t\t\r\n\t\tthis.dbg = this.gui.addGroup('Debug','Dbg', true)\r\n\t\tthis.dbg.addNumber( 'zm:', 0, this.updatePos.bind(this) )\r\n\t\tthis.dbg.addNumber( 'dx:', 0, this.updatePos.bind(this) )\r\n\t\tthis.dbg.addNumber( 'dy:', 0, this.updatePos.bind(this) )\r\n\t\tthis.dbg.addButton( 'Colors', ()=>this.chooseColor())\r\n\t\tthis.dbg.addCheckbox( 'TM' )\r\n\t\tthis.dbg.addButton( 'UnPlay', (evt)=>this.unplayLast( evt ) ) \r\n\t\tthis.dbg.addCheckbox( 'PropExp' ) \r\n\t\tthis.dbg.addButton( 'Quest', (evt)=>this.calcQuest( evt ) ) \r\n\t\tthis.dbg.addButton( 'Eval', (evt)=>this.findWinnable() ) \r\n\t\tthis.dbg.addNumber( 'mxG', 50 )\r\n\t\t\r\n\t\tHUI.setClass( 'guiG0', 'hide', true )\r\n\t}\r\n\r\n\tshowPanels( hdrid, lowerid ){\r\n\t\tmsg('')\r\n\t\tfor ( let id of ['Playing','Completed','CatStats','UserRecords'] )\r\n\t\t\tHUI.setClass( id, 'hide', id != hdrid )  // hide all but hdrid\r\n\t\t\r\n\t\tfor ( let id of ['data','menu','help'] )\r\n\t\t\tHUI.setClass( id, 'hide', id != lowerid )  // hide all but hdrid\r\n\t}\r\n//***************** ONLINE play ****************\r\n\tregisterSW(){\t\t\t// create service worker \r\n\t\tif ('serviceWorker' in navigator) {\r\n\t\t   window.addEventListener('load', () => {\r\n\t\t\t navigator.serviceWorker.register('/service-worker.js').then(registration => {\r\n\t\t\t   console.log('SW registered: ', registration)\r\n\t\t\t }).catch(registrationError => {\r\n\t\t\t   console.log('SW registration failed: ', registrationError)\r\n\t\t\t })\r\n\t\t   })\r\n\t\t }\r\n\t}\r\n\tresizeApp(){\t\t\t// process screen size change\r\n\t\tthis.windowW = window.innerWidth\r\n\t\tthis.windowH = window.innerHeight\r\n\t\tthis.headerH = HUI.gEl('header').clientHeight\r\n\t}\r\n\tasync initDB(){\t\t// init db & user & set mng.GmStart from maxGms\r\n\t\r\n\t\t// const oldBucket = 'Vat5Fw1JLaiatVabg8XBWJ'\r\n\t\t// await fetch(`https://kvdb.io/${oldBucket}/?write_key=${write_key}`, { method: 'DELETE'})\r\n\t// .then(res => res.text())\r\n\t// .then( res => console.log(` Delete bucket ${res}`) )\r\n\r\n\t\tthis.bucket = new KVdb.Bucket( this.bucketKey )\r\n\t\t\r\n\t\tthis.userID = localStorage.getItem('UserID')\r\n\t\tif ( this.userID == undefined ){\r\n\t\t\tlet nextUser = await this.getDBObj( 'nextUserID', 1 )\r\n\t\t\tthis.userID = `U${this.pad4(nextUser)}`\r\n\t\t\tthis.bucket.set( 'nextUserID', Number(nextUser) + 1 )\r\n\t\t\tlocalStorage.setItem( 'UserID', this.userID )\r\n\t\t}\r\n\t\t\r\n\t\tthis.userRecords = await this.getDBObj( this.userID, { numFirsts: 0, numBests: 0 } )\r\n\t\t\t\r\n\t\tthis.maxGms = await this.getDBObj( 'maxGms',  { E: 0,\tM: 0, H: 0,\tX: 0, seed: 0 } )\t\r\n\t\tthis.mng.setVal( 'GmStart', this.maxGms.seed )  // random seed to start with\r\n\t\t\r\n\t\tif ( this.UserStats == undefined ){\r\n\t\t\tlet ststr = localStorage.getItem('UserStats')\r\n\t\t\tif ( ststr != undefined && ststr.startsWith('{'))\r\n\t\t\t\tthis.UserStats = JSON.parse( ststr )\r\n\t\t\telse {\r\n\t\t\t\tthis.UserStats = {\r\n\t\t\t\t\tuserID: this.userID,\r\n\t\t\t\t\tgamesStarted: 0,\r\n\t\t\t\t\t\t// #compl   #0E0H\t\t# in a row  # 0E0H in row\r\n\t\t\t\t\tE:\t{ cCnt: 0, \tpCnt: 0,\tcStrk: 0,\tpStrk: 0  },\r\n\t\t\t\t\tM:\t{ cCnt: 0, \tpCnt: 0,\tcStrk: 0,\tpStrk: 0  },\r\n\t\t\t\t\tH:\t{ cCnt: 0, \tpCnt: 0,\tcStrk: 0,\tpStrk: 0  },\r\n\t\t\t\t\tX:\t{ cCnt: 0, \tpCnt: 0,\tcStrk: 0,\tpStrk: 0  },\r\n\t\t\t\t\tD:\t{ cCnt: 0, \tpCnt: 0,\tcStrk: 0,\tpStrk: 0  }\r\n\t\t\t\t}\r\n\t\t\t\tlocalStorage.setItem( 'UserStats', JSON.stringify( this.UserStats )) \r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( this.UserStats.userID != this.userID ){\r\n\t\t\tthis.UserStats.userID = this.userID\r\n\t\t\tlocalStorage.setItem( 'UserStats', JSON.stringify( this.UserStats )) \r\n\t\t}\r\n\t\t\r\n\t\tthis.initDaily()\r\n\t}\r\n\tinitDaily(){\r\n\t\tlet randgen = new Rand( dayjs().get('year') )\t// always same random seq per year\r\n\t\t// sequence changes if #/category changes-- but for everyone at the same time\r\n\t\tlet games = []\r\n\t\tlet nE = this.maxGms.E, nM = this.maxGms.M, nH = this.maxGms.H, nX = this.maxGms.X\r\n\t\tif (nM > nE/2) nM = nE/2\r\n\t\tif (nH > nE/3) nH = nE/3\r\n\t\tif (nX > nE/4) nX = nE/4\r\n\t\tfor (let i=0; i < nE; i++) games.push( `E${this.pad4(i)}` )\r\n\t\tfor (let i=0; i < nM; i++) games.push( `M${this.pad4(i)}` )\r\n\t\tfor (let i=0; i < nH; i++) games.push( `H${this.pad4(i)}` )\r\n\t\tfor (let i=0; i < nX; i++) games.push( `X${this.pad4(i)}` )\r\n\t\twhile (games.length < 366)\r\n\t\t\tgames = games.concat( games )\r\n\t\tthis.Daily = []\t\t// gen 366 gameID's .. ['E0207','X0194',... (mostly Easy, fewest X)\r\n\t\tfor ( let i = 0; i<366; i++ ){\r\n\t\t\tlet r = Math.trunc( randgen.next()*games.length )\r\n\t\t\tlet gm = games[r]\r\n\t\t\tgames.splice( r, 1 )\t// no duplicates\r\n\t\r\n\t\t\tthis.Daily.push( gm )\r\n\t\t}\r\n\t}\r\n\tupdateUser( nm ){\t\t// save user name??\r\n\t\tdebugger\r\n\t\tthis.UserName = nm\r\n\t\tlocalStorage.setItem( 'user', nm )\t\r\n\t\tif ( this.gameisover ){\r\n\t\t\tlet ng = localStorage.getItem( 'nGames' )-1\r\n\t\t\tlet gmstr = localStorage.getItem( `G${ng}` )\r\n\t\t\ttry {\r\n\t\t\t\tlet gm = JSON.parse( gmstr )\r\n\t\t\t\tgm.unm = this.UserName\r\n\t\t\t\tlocalStorage.setItem( `G${ng}`, JSON.stringify(gm) )\r\n\t\t\t} catch { \r\n\t\t\t\tconsole.log('error parsing game') \r\n\t\t\t\tdebugger\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tinitRand( key ){\r\n\t\tthis.randgen = new Rand( key )\t\t\r\n\t}\r\n\trand(){\t\t\t\t\t// => next random # based on seed\r\n\t\treturn this.randgen.next()\r\n\t}\r\n\tpad4( v ){\r\n\t\treturn v.toString().padStart(4,'0')\r\n\t}\r\n\tpad2( v ){\r\n\t\treturn v.toString().padStart(2,'0')\r\n\t}\r\n\terr( txt ){\r\n\t\tmsg( txt )\r\n\t\tconsole.log( txt )\r\n\t\tdebugger\r\n\t}\r\n\tclip(v, min,max){\r\n\t\treturn v < min? min : ( v > max? max : v )\r\n\t}\r\n\tclipY( y ){\r\n\t\treturn this.clip( y, 0, this.YSize-1 )\r\n\t}\r\n\tclipX( x ){ \r\n\t\treturn this.clip( x, 0, this.XSize-1 )\r\n\t}\r\n\r\n// command buttons  Easy..Expert, Daily, Hint, Stats\r\n\tresetGrid( ){\t// reset grid array & counters\r\n\t\tthis.grid = []\r\n\t\tthis.grid[-1]= []   // extra rows to limit y-1 & y+1 error checking\r\n\t\tthis.grid[ this.YSize ]= []\r\n\t\t\r\n\t\tthis.errCnt = 0\t\t\t\t// # of counter errors (debug)\r\n\t\tthis.gameisover = false\r\n\t\tthis.gamesteps = []\t\t\t// list of user moves for Unplay\r\n\t\tthis.blanks = []\t\t\t// list of blank cells for randSafeClick\r\n\t\tthis.processed = []\t\t\t// list of cells auto-processed\r\n\t\tthis.safeClicks = []\t\t// list of random 0 clicks\r\n\t\tthis.secret = 0\t\t\t\t// fillField games: set to YSz * YSz\r\n\t\tthis.cleared = 0\r\n\t\tthis.exploded = 0\r\n\t\tthis.bombed = 0\r\n\t\tthis.marked = 0\r\n\t\tthis.freed = 0\r\n\t\tthis.mines = 0\r\n\t\tthis.wrong = 0\r\n\t\tthis.right = 0\r\n\t}\r\n\tinitCurrGame(){\t\t\t// reset game stats\r\n\t\tthis.game = { \r\n\t\t\tver: this.Version, \r\n\t\t\tname: this.gameName,\r\n\t\t\terrors: 0,\r\n\t\t\thints:  0,\r\n\t\t\tnseconds: 0\r\n\t\t}\r\n\t\tthis.startClock()\r\n\t}\r\n\tstartClock(){\r\n\t\tthis.game.nseconds = 0\r\n\t\tthis.enableClock( true )\r\n\t\tthis.updateClock()\r\n\t\tHUI.setClass('Completed', 'hide', true )\r\n\t}\r\n\ttimeStr( nsec ){\r\n\t\tlet min = Math.trunc( nsec / 60 )\r\n\t\tlet sec = Math.trunc( nsec % 60 )\r\n\t\tif ( min >= 60 ){\r\n\t\t\tlet hr = Math.trunc( min / 60 )\r\n\t\t\tmin = Math.trunc( min % 60 )\r\n\t\t\treturn `${hr}:${this.pad2(min)}:${this.pad2(sec)}`\r\n\t\t} else\r\n\t\t\treturn `${min}:${this.pad2(sec)}`\r\n\t}\r\n\tupdateClock(){\r\n\t\tlet ms = Date.now() - this.clockStart\r\n\t\tlet nsec = this.game.nseconds + Math.trunc( ms/1000 )\t// seconds since last started\r\n\t\tHUI.gEl('Time').innerText = this.timeStr( nsec )\t\r\n\t}\r\n\tenableClock( enab ){\r\n\t\tthis.clockRunning = enab\r\n\t\tif ( enab ){\r\n\t\t\tthis.clockStart = Date.now()\r\n\t\t\tthis.clockId = setInterval( this.updateClock.bind(this), 1000 )\r\n\t\t} else {\r\n\t\t\tthis.game.nseconds += Math.trunc( (Date.now() - this.clockStart)/1000 )\r\n\t\t\tclearInterval( this.clockId )\r\n\t\t}\r\n\t}\r\n\trefreshStats(){\r\n\t\tHUI.gEl('Game').innerText = this.gameName\r\n\t\tHUI.gEl('Errors').innerText = `${this.game.errors}/3`\r\n\t\tHUI.gEl('Hints').innerText = `${this.game.hints}/3`\r\n\t\t\r\n\t\tif ( this.gmdef.Stats != null && this.gmdef.Stats != undefined ){\r\n\t\t\tlet f = this.gmdef.Stats.firstDate\r\n\t\t\tif ( f == '' ){\r\n\t\t\t\tf = 'Never!'\r\n\t\t\t\tHUI.gEl('BestTime').innerText = ''\r\n\t\t\t} else {\r\n\t\t\t\tHUI.gEl('BestTime').innerText = this.timeStr( this.gmdef.Stats.bestTime )\r\n\t\t\t}\r\n\t\t\tHUI.gEl('FCompleted').innerText = f\r\n\t\t}\r\n\t}\r\n\tshowHelp(){\r\n\t\tthis.showPanels( '', 'help' )\r\n\t}\r\n\tshowMenu( evt ){\t\t// show startup menu\r\n\t\tmsg( `Clk ${evt.target.id}` )\r\n\t\tthis.showPanels( '', 'menu' )\r\n\t}\r\n\tshowRecords(){\t// show users personal records\r\n\t\tthis.showPanels( 'UserRecords', 'menu' )\r\n\t\tHUI.gEl('FirstWin').innerText = this.userRecords.numFirsts.toString() \r\n\t\tHUI.gEl('FastestWin').innerText = this.userRecords.numBests.toString()  \r\n\t}\r\n\tshowStats( diff ){\t// show stats for current category E,M,H,X,D\r\n\t\tHUI.gEl('Diff').innerText = this.categories[ diff ]\r\n\t\tHUI.gEl('Cnt').innerText = this.UserStats[ diff ].cCnt\r\n\t\tHUI.gEl('PerfCnt').innerText = this.UserStats[ diff ].pCnt\r\n\t\tHUI.gEl('Strk').innerText = this.UserStats[ diff ].cStrk\r\n\t\tHUI.gEl('PerfStrk').innerText = this.UserStats[ diff ].pStrk\r\n\t\tthis.showPanels( 'CatStats', 'menu' )\r\n\t}\r\n\tshowCompleted( perfect ){\t// show stats for just completed game\r\n\t\tHUI.gEl('TCompleted').innerText = this.timeStr( this.game.nseconds )\r\n\r\n\t\tif ( perfect ){\r\n\t\t\tHUI.gEl('Perfect').innerText = this.newRecord==''? `${this.gameID} Perfect Game!` : this.newRecord\r\n\t\t\tHUI.gEl('PctSlowerHd').innerText = `Faster than:` \r\n\t\t\tHUI.gEl('PctSlower').innerText = `${Math.round(this.pctSlower)}%` \r\n\t\t} else {\r\n\t\t\tHUI.gEl('Perfect').innerHTML =\r\n\t\t\t\t`${this.gameID} completed!<br> (${this.game.errors}E ${this.game.hints}H)`\r\n\t\t\tHUI.gEl('PctSlower').innerText = ''\r\n\t\t}\r\n\t\tHUI.gEl('PctErr').innerText = `${Math.round(this.pctMoreErrs)}%`\r\n\t\tHUI.gEl('PctHint').innerText = `${Math.round(this.pctMoreHints)}%`\r\n\t\tthis.showPanels( 'Completed', 'data' )\r\n\t}\r\n\tinitUIstate(){\t\t\t// reset UI & html state for new game\r\n\t\tlet csz = this.cellSize = 21.25;  //HUI.gEl('m0000').offsetWidth but with fraction\r\n\t\t\r\n\t\tthis.resizeApp() // record winow size\r\n\t\tHUI.setClass( 'Popup', 'hide', true )\r\n\r\n\t\tlet data = HUI.gEl('data')\r\n\t\tdata.style.width = `${ this.XSize * csz}px`\r\n\t\tdata.style.height = `${ this.YSize * csz}px`\r\n\r\n\t\tthis.longtouchtimer = 0;\r\n\t\tthis.touchduration = 500; //length of time we want the user to touch before we do something\r\n\t\tthis.touchZooming = false \r\n\t\tthis.touchDist = 0\r\n\t\tthis.touchStartDist = 0\r\n\t\tthis.selX = 0\r\n\t\tthis.selY = 0\r\n\t\tthis.usedFree = false\t// first safe click is free\r\n\t\t\r\n\t\tlet dataW = data.clientWidth \r\n\t\tlet dataH = data.clientHeight\r\n\t\tlet hdrH = HUI.gEl('header').clientHeight\r\n\t\tlet bodyW = window.innerWidth\r\n\t\tlet bodyH = window.innerHeight\r\n\t\tlet zmw = bodyW / dataW\r\n\t\tlet zmh = (bodyH-hdrH) / dataH\r\n\t\tthis.touchZoom = Math.trunc( (zmw < zmh? zmw : zmh) * 90 )\r\n\t\tthis.setZoom( this.touchZoom, 0,0 )\r\n\t\t\r\n\t\tHUI.setClass( 'Playing', 'hide', false )\r\n\t}\r\n\tloadGameDef( gmdef ){\t// set game state from gmdef\r\n\t\tif ( gmdef.id == undefined || gmdef.XSz == undefined ){\r\n\t\t\tmsg( `invalid gmdef ${gmdef} ${gmdef.id}` )\r\n\t\t\tdebugger\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.gmdef = gmdef\r\n\t\tconst cellTxt = [ '*',     '',   '1',   '2',   '3',   '4',   '5',   '6',  '7',    '8',  '9' ]\r\n\t\tconst questPct = { 'E': 0.0, 'M': 0.20, 'H': 0.50, 'X': 0.80 }\r\n\t\tthis.initRand( gmdef.G )\t// to deterministically choose ?'s\r\n\t\t\r\n\t\tthis.XSize = gmdef.XSz\r\n\t\tthis.YSize = gmdef.YSz\r\n\t\tthis.resetGrid( )\r\n\t\tthis.gameID = gmdef.id\r\n\t\t\r\n\t\tlet html = ''\r\n\t\tfor ( let y = 0; y < this.YSize; y++ ){\r\n\t\t\tlet cells = Array.from( gmdef.st[y] )\r\n\t\t\tif ( cells.length != this.XSize ){ msg(` bad gamedef: row ${y}` );\tdebugger }\r\n\t\t\tthis.grid[ y ] = []\r\n\t\t\tthis.processed[y] = []\r\n\t\t\tfor ( let x = 0; x < this.XSize; x++ ){\r\n\t\t\t\tthis.processed[y][x] = false\r\n\t\t\t\t\r\n\t\t\t\tlet encoding = cells[ x ]\r\n\t\t\t\tlet gv = this.grid[y][x] = this.decodeGridVal[ encoding ]\r\n\t\t\t\tif ( gv >=0 ){\r\n\t\t\t\t\tif ( gv == 0 )\r\n\t\t\t\t\t\tthis.blanks.push( [y,x] )\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.mines++\r\n\t\t\t\tlet cls = `t${gv}`\r\n\t\t\t\t\r\n\t\t\t\tlet id = this.gID( y, x )\r\n\t\t\t\tlet txt = cellTxt[ gv+1 ]\r\n\t\t\t\tif ( this.decodeQuest[ encoding ] == 1 ){ \r\n\t\t\t\t\tif ( this.rand() <= questPct[ gmdef.diff ] ){ \r\n\t\t\t\t\t\ttxt = '?'\r\n\t\t\t\t\t\tcls = 'tQ'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ( this.decodeSecret[ encoding ] == 1 ){\r\n\t\t\t\t\tcls = 'grd secret'\r\n\t\t\t\t\tthis.secret++\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcls += ' grd cleared'\r\n\t\t\t\t\tthis.cleared++\r\n\t\t\t\t}\r\n\t\t\t\thtml += `<span id=\"${id}\" class=\"${cls}\"> ${txt} </span>`\r\n\t\t\t}\r\n\t\t\thtml += '<br>'\r\n\t\t}\r\n\t\tHUI.gEl('data').innerHTML = html;\r\n\r\n\t\tthis.initCurrGame()\r\n\t\tthis.initUIstate()\r\n\t\t\r\n\t\t//msg( `${this.title}      ${this.gameName}` )\r\n\t\tthis.refreshStats()\r\n\t\tthis.showCnts()\r\n\t}\r\n\tnextGame( diff ){  \t\t// 'E', 'M', 'H', 'X', or 'D'\r\n\t\tthis.currDiff = diff\r\n\t\tthis.initCurrGame()\r\n\t\tlet GCstr = localStorage.getItem( 'Gcntrs' )\r\n\t\tif ( GCstr == undefined ) \r\n\t\t\tGCstr = '{ \"E\":0,\"M\":0,\"H\":0,\"X\":0,\"D\":0 }' \r\n\t\tlet\tgmCtrs = JSON.parse( GCstr )\r\n\t\t\r\n\t\tlet gmNum = 0\r\n\t\tif ( diff=='D' ){\r\n\t\t\tlet idx = dayjs().dayOfYear()\t//TODO: multiyear sequence & get gameName\r\n\t\t\tif ( idx < gmCtrs[ diff ] ){\r\n\t\t\t\tmsg('Daily game already played')\r\n\t\t\t\treturn \t// already played\r\n\t\t\t}\r\n\t\t\tmsg( `Daily ${dayjs().format('D-MMM-YYYY')}` )\r\n\r\n\t\t\tthis.gameName = this.Daily[ idx ]  // e.g. E0003\r\n\t\t} else {\r\n\t\t\tgmNum = gmCtrs[ diff ]\r\n\t\t\tthis.gameName = `${diff}${this.pad4(gmNum)}`\r\n\t\t}\r\n\t\tgmCtrs[ diff ]++\r\n\t\tlocalStorage.setItem( 'Gcntrs', JSON.stringify( gmCtrs ) )\r\n\t\t\r\n\t\tthis.fetchGameDef( this.gameName )\t\t// fetches & loads specified game from DB\r\n\t\tthis.showPanels( 'Playing', 'data' )\r\n\t\t\r\n\t\tthis.UserStats.gamesStarted++\r\n\t\tlocalStorage.setItem( 'UserStats', JSON.stringify( this.UserStats )) \r\n\t}\r\n\tasync fetchGameDef( key ){\t// get gmdef from KVdb then loadGameDef\r\n\t\tthis.gmdef = await this.getDBObj( key )\r\n\t\tthis.loadGameDef( this.gmdef )\r\n\t}\r\n\r\n\tgenHint( ){\r\n\t\tif ( this.game.hints == 3 ){\r\n\t\t\tmsg('out of hints')\r\n\t\t\treturn \r\n\t\t}\r\n\t\t// find a cell that's playable & highlight it\r\n\t\tlet poss = []\r\n\t\tfor ( let y = 0; y < this.YSize; y++ )\r\n\t\t\tfor ( let x=0; x < this.XSize; x++){\r\n\t\t\t\t// find adj nmines, marked & secret\r\n\t\t\t\tlet ev = this.evalCell( { y: y, x: x }, false )\t\r\n\t\t\t\tif ( ev != null ){\r\n\t\t\t\t\tlet secret = ev.secret.length\r\n\t\t\t\t\tlet nhidden = ev.nmines - ev.marked\r\n\t\t\t\t\tif ( nhidden==0 || secret == nhidden ) \r\n\t\t\t\t\t\tposs.push( { y: y, x: x } )\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tif ( poss.length == 0 ){\r\n\t\t\tmsg('No deterministic move!')\r\n\t\t} else {\r\n\t\t\tlet r = Math.trunc( this.rand() * poss.length )\r\n\t\t\tlet c = poss[ r ]\r\n\t\t\tthis.selCell( c.y, c.x, true )\r\n\t\t\tthis.game.hints++\r\n\t\t\tthis.refreshStats()\r\n\t\t}\r\n\t}\r\n//******* for hint\r\n\tevalCell( cell, setQ ){\t\t// => cell status if not finished, switches to '?' if no secret neighbors\r\n\r\n\t\tlet id = this.gID( cell.y, cell.x )\r\n\t\tif ( HUI.hasClass(id, ['secret', 'marked', 'exploded' ] )) return null\r\n\r\n\t\t// cell is either 'cleared', 'freed', or 'bombed'\r\n\t\tlet adj = this.adjCells( cell.y, cell.x )\r\n\t\tlet marked = 0\r\n\t\tlet secNbrs = []\r\n\t\tfor ( let n of adj ){\r\n\t\t\tlet nid = this.gID( n.y, n.x )\r\n\t\t\tif ( HUI.hasClass( nid, 'secret' ))\r\n\t\t\t\tsecNbrs.push( n )\r\n\t\t\tif ( HUI.hasClass( nid, 'marked' )) \r\n\t\t\t\tmarked++\r\n\t\t}\r\n\t\tif ( secNbrs.length==0 ){\r\n\t\t\tif ( setQ ) \r\n\t\t\t\tHUI.gEl(id).innerText = '?'  // not needed to win-- set to ?\r\n\t\t\t//this.markProcessed( id )\r\n\t\t\treturn null\t// neighbors all marked or cleared\r\n\t\t}\r\n\t\tlet nmines = this.grid[ cell.y ][ cell.x ]\t// # of adjacent mines\r\n\t\treturn { y: cell.y, x: cell.x, nmines: nmines, marked: marked, secret: secNbrs }\r\n\t}\r\n\tminMax( v, mxv ){\t\t// => [ v-1, v+1 ] clipped to [0..mxv]\r\n\t\tlet min = v==0? 0 : v-1\r\n\t\tlet max = v==mxv? mxv : v+1\r\n\t\treturn [ min, max ]\r\n\t}\r\n\tadjCells( y, x ){\t\t// => [ [y,x]... ] of cells adj to y,x\r\n\t\tlet adj = []\r\n\t\tlet [xmin,xmax] = this.minMax( x, this.XSize-1 )\r\n\t\tlet [ymin,ymax] = this.minMax( y, this.YSize-1 )\r\n\t\tfor ( let dy=ymin; dy<=ymax; dy++ )\r\n\t\t\tfor ( let dx=xmin; dx<=xmax; dx++)\r\n\t\t\t\tif ( y!=dy || x!=dx ) \r\n\t\t\t\t\tadj.push( { y:dy, x:dx } )\r\n\t\treturn adj\r\n\t}\r\n\tneighbors( y, x ){\t\t// => [ [y-1,x-1]...[y+1,x+1] ]\r\n\t\ty = Number(y)\r\n\t\tx = Number(x)\r\n\t\treturn [ [y-1,x-1], [y,x-1], [y+1,x-1], [y-1,x],[y+1,x], [y-1,x+1],[y,x+1],[y+1,x+1] ]\r\n\t}\r\n\r\n//****** display & game state updates\r\n\tgID( y, x ){\t\t\t// => id of cell y,x eg. 'm0203'\r\n\t\tif ( y<0 || y>=this.YSize ) return null\r\n\t\tif ( x<0 || x>=this.XSize ) return null\r\n\t\treturn 'm' + this.pad2(y) + this.pad2(x)\r\n\t}\r\n\tclearSecret( id ){\t\t\t// clear class 'secret' & check\r\n\t\tif (!HUI.hasClass(id, 'secret')){ console.log('SECRET'); debugger }\r\n\t\tHUI.setClass( id, 'secret', false )\r\n\t\tthis.secret--\r\n\t\tthis.checkCnt( this.secret, 'secret' )\r\n\t}\r\n\tclearCell( y,x, safe, user ){// make move to clear cell\r\n\t\tthis.addMove( y, x, user )\r\n\t\tlet id = this.gID(y,x)\r\n\t\tlet g = this.grid[y][x]\r\n\t\tthis.clearSecret( id )\r\n\t\tif (safe){\r\n\t\t\tHUI.setClass( id, 'freed', true )\r\n\t\t\tthis.freed++\r\n\t\t\tthis.checkCnt( this.freed, 'freed' )\r\n\t\t} else {\r\n\t\t\tif (HUI.hasClass( id, 'cleared')){ console.log('CLEAR'); debugger }\r\n\t\t\tHUI.setClass( id, 'cleared', true )\r\n\t\t\tthis.cleared++\r\n\t\t\tthis.checkCnt( this.cleared, 'cleared' )\r\n\t\t\tif ( HUI.gEl(id).innerText=='?' )\r\n\t\t\t\tHUI.setClass( id, g<0? 'tm' : 'tQ', true )\t\r\n\t\t\telse\r\n\t\t\t\tHUI.setClass( id, g<0? 'tm' : `t${g}`, true )\t\r\n\t\t}\r\n\t\tthis.showCnts()\r\n\t}\r\n\texplodeCell( y, x, user ){\t// explode (& propagate)\r\n\t\tthis.addMove( y, x, user )\r\n\t\tlet id = this.gID(y,x)\r\n\t\tthis.clearSecret( id )\r\n\t\tnavigator.vibrate( [50,50,100] )\r\n\t\tHUI.setClass( id, 'exploded', true )\r\n\t\tthis.exploded++\r\n\t\tthis.game.errors++\r\n\t\tif ( this.game.errors == 3 ) \r\n\t\t\tthis.quitGame()\r\n\t\telse {\r\n\t\t\tthis.refreshStats()\r\n\t\t\tthis.showCnts()\r\n\t\t}\r\n\t}\r\n\tbombCell( y, x ){\t\t\t// set cell as destroyed by propagating explosion\r\n\t\tthis.addMove( y, x, false )\t\t// alway derived\r\n\t\tlet id = this.gID(y,x)\r\n\t\tthis.clearSecret( id )\r\n\t\tHUI.setClass( id, 'bombed', true )\r\n\t\tthis.bombed++\r\n\t\tthis.showCnts()\r\n\t}\r\n\tmarkCell( y, x ){\t\t\t// mark cell by user as likely mine\r\n\t\tthis.addMove( y, x, true ) // always user\r\n\t\tlet id = this.gID(y,x)\r\n\t\tif (HUI.hasClass(id, 'marked')){  // unmark => click\r\n\t\t\tHUI.setClass( id, 'marked', false )\r\n\t\t\tthis.marked--\r\n\t\t\tthis.checkCnt( this.marked, 'marked' )\r\n\r\n\t\t\tHUI.setClass( id, 'secret', true )  // re-mark secret so doClick will work\r\n\t\t\tthis.secret++\r\n\t\t\tthis.checkCnt( this.secret, 'secret' )\r\n\t\t\tthis.showCnts()\r\n\t\t\tthis.doGridClick( y,x, false )\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif ( !HUI.hasClass(id, 'secret')) return   // can't mark cleared cell\r\n\t\tthis.clearSecret( id )\t\r\n\t\tHUI.setClass( id, 'marked', true )\r\n\t\tthis.marked++\r\n\t\tthis.checkCnt( this.marked, 'marked' )\r\n\t\tthis.showCnts()\r\n\t}\r\n\tcntGrid( cls ){\t\t\t// => # cells with class 'cls' \r\n\t\tlet cnt=0\r\n\t\tfor (let y=0; y<this.YSize; y++){\r\n\t\t\tfor (let x=0; x<this.XSize; x++){\r\n\t\t\t\tif ( HUI.hasClass( this.gID(y,x), cls )) \r\n\t\t\t\t\tcnt++\r\n\t\t\t\tif ( cls=='cleared' && HUI.hasClass( this.gID(y,x), 'processed' ))\r\n\t\t\t\t\tcnt++\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cnt\r\n\t}\r\n\tcheckCnt( cnt, cls ){\t// consistency check 'cnt' of cells with 'cls'\r\n\t\tlet act = this.cntGrid( cls )\r\n\t\tif ( act != cnt ){\r\n\t\t\tthis.errCnt++\r\n\t\t\tif (this.errCnt==1) \r\n\t\t\t\tconsole.log(`chkCnt ${cls}`)\r\n\t\t\tdebugger\r\n\t\t}\r\n\t}\r\n\tshowCnts(){\t\t\t\t// update 'Mines:' & 'Details:' & check for gameOver\r\n\t\tlet right=0, wrong=0\r\n\t\tfor (let y=0; y<this.YSize; y++){\r\n\t\t\tfor (let x=0; x<this.XSize; x++){\r\n\t\t\t\tif ( HUI.hasClass( this.gID(y,x), 'marked' )){\r\n\t\t\t\t\tif ( this.grid[y][x] < 0 ) \r\n\t\t\t\t\t\tright++\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\twrong++\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.gui.setVal('Mines:', `${this.mines} ${this.exploded}E ${this.marked}M` )\r\n\t\tlet err = this.errCnt == 0? '' : `${this.errCnt}E`\r\n\t\tthis.det.setVal('Details:', `${this.mines}* (${this.marked}M ${wrong}W ${right}R) ${this.exploded}E ${this.bombed}B ${this.cleared}C ${this.freed}F ${this.secret}S ${err}` )\r\n\r\n\t\tfor (let n of ['secret','marked','cleared','exploded','bombed']){\r\n\t\t\tthis.checkCnt( this[n], n )\r\n\t\t}\r\n\t\tif ( this.secret == 0 ){\r\n\t\t\tthis.gameOver()\r\n\t\t}\r\n\t}\r\n\tincBin( nsec ){\t\t// increment bin for 'nsec' & return cnt of faster bins\r\n\t\tconst BinSz = [  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  // 0..11 -> 60   =  1:00\r\n\t\t\t\t\t\t10, 10, 10, 10, 10, 10, 10, 10, 10, 10,\t10, 10,  // 12..23 -> 180 =  3:00\r\n\t\t\t\t\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20,\t // 24..35 -> 420 =  7:00\r\n\t\t\t\t\t\t30, 30, 30, 30, 30, 30, 30, 30, 30, 30,\t30, 30,  // 36..47 -> 780 = 13:00\r\n\t\t\t\t\t\t60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60,  // 48..59 -> 1500 = 25:00\r\n\t\t\t\t\t\t10000000 \t\t\t\t\t\t\t\t\t\t // 60 ->   >25:00\r\n\t\t\t\t\t\t]\r\n\t\tlet Bins = this.gmdef.Stats.Bins\r\n\t\tif ( Bins.length < BinSz.length )\r\n\t\t\tfor (let i = Bins.length; i<BinSz.length; i++ )\r\n\t\t\t\tBins.push( 0 )\r\n\t\t\t\r\n\t\tlet idx = 0\r\n\t\tlet binmax = 0\r\n\t\tlet fasterCnt = 0\r\n\t\tfor ( let i=0; i < BinSz.length; i++ ){\r\n\t\t\tbinmax += BinSz[i]\r\n\t\t\tif ( nsec < binmax ){\r\n\t\t\t\tBins[ i ]++\r\n\t\t\t\tconsole.log( `${nsec} into Bins[${i}] ${binmax-BinSz[i]}..${binmax}` )\r\n\t\t\t\treturn fasterCnt\r\n\t\t\t} else {\r\n\t\t\t\tfasterCnt += Bins[ i ]  // games in this bin were faster\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn fasterCnt\r\n\t}\r\n\tquitGame(){\r\n\t\t// break streaks & go to menu\r\n\t\tthis.enableClock( false )\r\n\t\tthis.UserStats[ this.currDiff ].cStrk = 0\r\n\t\tlocalStorage.setItem( 'UserStats', JSON.stringify( this.UserStats )) \r\n\t\tthis.showPanels( 'Playing', 'menu' )\r\n\t}\r\n\tgameOver(){\t\t\t\t// report stats for game\t\t\r\n\t\tif ( this.PlayTest ) return\t\t// if auto-play\r\n\t\tif ( this.gameisover ) return\t// second showCnts\r\n\t\t\r\n\t\tthis.gameisover = true\r\n\t\tthis.enableClock( false )\r\n\t\t\r\n\t\tif (this.errCnt != 0) console.log( `${this.errCnt} errs` )\r\n\t\tnavigator.vibrate( [100,50,100,50,200] )\r\n\t\t\t\t\r\n\t\tlet gSt = this.gmdef.Stats\r\n\t\tlet E = this.game.errors\r\n\t\tlet H = this.game.hints\r\n\t\tlet nsec = this.game.nseconds\r\n\t\tlet perfect = ( E == 0 && H == 0 )\r\n\t\t\r\n\t\tthis.UserStats[ this.currDiff ].cCnt++\t// add to count by difficulty\r\n\t\tthis.UserStats[ this.currDiff ].cStrk++\t// add to streak by difficulty\r\n\r\n\t\tgSt.completeCnt++\r\n\t\tgSt.Cnt[E][H]++\t// add to count by E & H\r\n\t\tlet moreErrCnt = 0\r\n\t\tfor (let i= E+1; i<3; i++)\r\n\t\t\tfor ( let j = 0; j<3; j++ )\r\n\t\t\t\tmoreErrCnt += gSt.Cnt[i][j]\r\n\t\tthis.pctMoreErrs = ( moreErrCnt*100 ) / gSt.completeCnt\r\n\r\n\t\tlet moreHintCnt = 0\r\n\t\tfor (let i= H+1; i<3; i++)\r\n\t\t\tfor ( let j = 0; j<3; j++ )\r\n\t\t\t\tmoreHintCnt += gSt.Cnt[j][i]\r\n\t\tthis.pctMoreHints = ( moreHintCnt*100 ) / gSt.completeCnt\r\n\t\t\r\n\t\tlet prevBest = ''\r\n\t\tthis.newRecord = ''\r\n\t\tif ( perfect ){   // perfect game\r\n\t\t\tgSt.perfectCnt++\t\t// add to game perfect count\r\n\t\t\t\r\n\t\t\tif ( gSt.firstDate == '' ){  // first perfect win\r\n\t\t\t\tgSt.firstDate = dayjs().format('YYYY-MMM-DD')\r\n\t\t\t\tgSt.bestTime = nsec\r\n\t\t\t\tgSt.bestUsers = [ this.userID ]\r\n\t\t\t\tthis.userRecords.numFirsts++\r\n\t\t\t\tthis.userRecords.numBests++\r\n\t\t\t\tthis.newRecord = `First to perfectly complete ${this.gameID}!`\r\n\t\t\t\t\r\n\t\t\t} else if ( nsec < gSt.bestTime ){\r\n\t\t\t\tprevBest = gSt.bestUsers[ gSt.bestUsers.length-1 ]\t// userID of previous best\r\n\t\t\t\t\r\n\t\t\t\tgSt.bestTime = nsec\r\n\t\t\t\tgSt.bestUsers.push( this.userID )\r\n\t\t\t\tthis.userRecords.numBests++\r\n\t\t\t\tthis.newRecord = `New best time for ${this.gameID}!`\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.UserStats[ this.currDiff ].pCnt++\t// add to difficulty perfect count\r\n\t\t\tthis.UserStats[ this.currDiff ].pStrk++\t// add to perfect streak\r\n\t\t\r\n\t\t\tlet fasterCnt = this.incBin( nsec )\t// add to bin by speed\r\n\t\t\tlet totPerfect = gSt.Cnt[0][0]\r\n\t\t\tthis.pctSlower = (totPerfect - fasterCnt)*100/totPerfect   // total-faster == slower\r\n\t\t} else {\r\n\t\t\tthis.UserStats[ this.currDiff ].pStrk = 0\t// perfect streak broken\r\n\t\t}\t\r\n\t\tthis.showCompleted( perfect )\r\n\t\t\r\n\t\t// update game stats => kvdb\r\n\t\tthis.setDBObj( this.gameID, this.gmdef )\r\n\t\t\r\n\t\t// update user stats => localStorage\r\n\t\tlocalStorage.setItem( 'UserStats', JSON.stringify( this.UserStats ) )\r\n\t\t\r\n\t\tif ( this.newRecord != '' ){\t// update userRecord at DB\r\n\t\t\tthis.setDBObj( this.userID, this.userRecords )\r\n\t\t\tif ( prevBest != '' )\r\n\t\t\t\tthis.decrBests( prevBest )\r\n\t\t}\r\n\t}\r\n\t\r\n\tasync getDBObj( key, defval ){\r\n\t\tlet val = defval\r\n\t\ttry {\r\n\t\t\tlet objstr = await this.bucket.get( key )\r\n\t\t\tval = JSON.parse( objstr )\r\n\t\t} catch(err){ \r\n\t\t\tconsole.log( `getDBObj: setting default` )\r\n\t\t\tthis.setDBObj( key, defval )\r\n\t\t}\r\n\t\treturn val\r\n\t}\r\n\tasync setDBObj( id, val ){\t// write JSON val to DB[ id ]\r\n\t\tawait this.bucket.set( id, JSON.stringify( val ))\r\n\t}\r\n\tasync decrBests( uid ){\t// get user records for uid & decrement numBests\r\n\t\tlet uStats = await this.getDBObj( uid )\r\n\t\tuStats.numBests--\r\n\t\tthis.setDBObj( uid, uStats )\r\n\t}\r\n\r\n\tshowGames(evt){\t\t\t// show popup window with game stats\r\n\t\tevt.stopPropagation()\r\n\t\tif ( !HUI.hasClass( 'Popup', 'hide' )){\r\n\t\t\tHUI.setClass( 'Popup', 'hide', true )\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet ng = Number( localStorage.getItem('nGames'))\r\n\t\tlet html = ''\r\n\t\tlet user = ''\r\n\t\tlet date = ''\r\n\t\tfor (let i=0; i< ng; i++){\r\n\t\t\tlet gmstr = localStorage.getItem( `G${i}` )\r\n\t\t\tlet gm = undefined\r\n\t\t\ttry {\r\n\t\t\t\tgm = JSON.parse( gmstr )\r\n\t\t\t} catch {\r\n\t\t\t\tlocalStorage.removeItem( `G${i}` )\r\n\t\t\t}\r\n\t\t\tif ( gm != undefined ){\r\n\t\t\t\tlet st = dayjs( gm.start )\r\n\t\t\t\tlet dt = st.format('D-MMM-YY')\r\n\t\t\t\tif ( dt != date || gm.unm != user ){\r\n\t\t\t\t\tdate = dt\r\n\t\t\t\t\tuser = gm.unm\r\n\t\t\t\t\thtml += `${date} ${user}: <br>`\r\n\t\t\t\t}\r\n\t\t\t\tlet end = dayjs( gm.end )\r\n\t\t\t\thtml += `  ${st.format('H:mm')} ${gm.name} ${end.diff(st,'minute',true).toFixed(1)}m  &nbsp;&nbsp; Score:${gm.score} <br>`\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( this.touchHist ){\r\n\t\t\tlet tH = this.touchHist\r\n\t\t\thtml = `pS:${tH.panStartPt.x},${tH.panStartPt.y} <br>`\r\n\t\t\thtml += `tS:${tH.touchStartPt.x},${tH.touchStartPt.y} <br>`\r\n\t\t\thtml += `sD:${tH.touchStartDist} Z:${tH.touchStartZoom} <br>`\r\n\t\t\tfor ( let u of tH.updt ) \r\n\t\t\t\thtml += ` zm:${u.zm} dx:${u.dx} dy:${u.dy} <br>`\r\n\t\t}\r\n\t\tHUI.gEl('Popup').innerHTML = html\r\n\t\tHUI.setClass( 'Popup', 'hide', false )\r\n\t}\r\n\r\n//******  UI for clicks, touches, key commands\r\n\tgridClick( evt ) {\t\t\t// cell left click, or right (mark)\r\n\t\tHUI.setClass( 'Popup', 'hide', true )\r\n\t\tthis.clearSel()\r\n\t\tif ( this.gameIsOver ) return\r\n\t\tlet tgt = evt.target\r\n\t\tif ( !tgt.id.startsWith('m') || tgt.id.length != 5) return\r\n\t\tlet y = Number(tgt.id.substr(1,2)), x = Number(tgt.id.substr(3,4))\r\n\t\tif (evt.button!=0){  \r\n\t\t\tthis.markCell( y, x )\r\n\t\t\tevt.preventDefault()\r\n\t\t} else {\r\n\t\t\tthis.doGridClick( y, x, false )\r\n\t\t}\r\n\t}\r\n\tdoGridClick( y, x, safe ){\t// click cell -- clear or explode\r\n\t\tlet cid = this.gID(y,x)\r\n\t\tif ( !HUI.hasClass( cid, 'secret' ) || this.gameIsOver ) return\r\n\t\t\r\n\t\tif (this.game.start==undefined){\r\n\t\t\tthis.game.start = dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n\t\t\tthis.game.nMoves = 0\r\n\t\t}\r\n\t\tthis.game.nMoves++\r\n\t\tif ( this.grid[y][x] < 0 ){\t//detonate mine\r\n\t\t\tif ( this.dbg.getVal( 'PropExp' ) ){\r\n\t\t\t\tthis.explodeStep( y,x, true )\r\n\t\t\t} else {\r\n\t\t\t\tif ( !HUI.hasClass( cid, 'exploded' ) )\r\n\t\t\t\t\tthis.explodeCell( y,x, true )\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tthis.clearCell( y, x, safe, true )\r\n\t\tif ( this.grid[y][x]==0){  // auto-spread clearing\r\n\t\t\tthis.spreadClear( y,x, safe )\r\n\t\t}\r\n\t\tthis.showCnts()\r\n\t}\r\n\tspreadClear( y,x, safe ){\t// spread click on 0 out to borders of island\r\n\t\tlet todo = this.neighbors(y,x); \r\n\t\twhile (todo.length>0){\r\n\t\t\tlet [y2,x2] = todo.pop()\r\n\t\t\tlet id = this.gID(y2,x2)\r\n\t\t\tif ( this.grid[y2][x2]>=0 && HUI.gEl(id).classList.contains('secret') ){\r\n\t\t\t\tthis.clearCell(y2,x2, safe, false)\r\n\t\t\t\tif (this.grid[y2][x2]==0){\r\n\t\t\t\t\tlet nbrs = this.neighbors( y2, x2 )\r\n\t\t\t\t\ttodo = todo.concat( nbrs )\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\texplodeStep( y,x, user ){\t// propagate exploding cell\r\n\t\tlet id = this.gID(y, x)\r\n\t\tif ( HUI.hasClass( id, 'exploded' )) return\r\n\t\t\r\n\t\tHUI.setClass( id, `exploding`, true )\r\n\t\tthis.explodeCell(y,x, user)\r\n\t\tlet nbrs = this.neighbors( y, x )\r\n\t\tfor ( let [y2, x2] of nbrs ){\r\n\t\t\tlet id2 = this.gID(y2,x2)\r\n\t\t\tif ( id2!=null && HUI.hasClass( id2, 'secret' )){\r\n\t\t\t\tlet g = this.grid[y2][x2]\r\n\t\t\t\tif ( !HUI.hasClass(id2, 'marked') || g>=0 ){\r\n\t\t\t\t\tif ( g < 0 ){\r\n\t\t\t\t\t\tsetTimeout( this.explodeStep.bind(this, y2,x2,false), 300 )\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tthis.bombCell( y2,x2 )\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetTimeout( HUI.setClass( id, 'exploding', false ), 2500 )\r\n\t}\r\n\r\n\ttouchmove( evt ){\t\t// touch evt\r\n\t\tif ( evt.touches.length == 2 ){\r\n\t\t\tthis.touchHist = false\t// {}\r\n\t\t\tlet tH = this.touchHist\r\n\t\t\t\r\n\t\t\tlet t1 = evt.touches.item(0)\r\n\t\t\tlet t2 = evt.touches.item(1)\r\n\t\t\tthis.touchPt = { x:(t1.clientX + t2.clientX)/2, y:(t1.clientY + t2.clientY)/2 }\r\n\t\t\tlet xd = t1.clientX - t2.clientX\r\n\t\t\tlet yd = t1.clientY - t2.clientY\r\n\t\t\tthis.touchDist = Math.round( Math.sqrt(xd*xd + yd*yd))\r\n\t\t\tlet data = HUI.gEl('data')\r\n\t\t\tif (this.touchZoom==undefined) this.touchZoom = 100\r\n\t\t\tif ( this.touchStartDist == 0 ){\r\n\t\t\t\tlet r = data.getBoundingClientRect()\r\n\t\t\t\tlet lx = data.style.left, ty = data.style.top\r\n\t\t\t\t//msg( `T,L=${ty},${lx}=${r.top},${r.left}` )\r\n\t\t\t\tthis.panStartPt = { x: Number( lx.replace('px','')), y: Number( ty.replace('px','')) }\r\n\t\t\t\tthis.touchStartPt = { x: this.touchPt.x, y: this.touchPt.y }\r\n\t\t\t\tthis.touchStartDist = this.touchDist\r\n\t\t\t\tthis.touchStartZoom = this.touchZoom\r\n\t\t\t\tif ( tH ){\r\n\t\t\t\t\tfor ( let n of ['panStartPt','touchStartPt','touchStartDist','touchStartZoom'])\r\n\t\t\t\t\t\ttH[n] = this[n]\r\n\t\t\t\t\ttH.updt = []\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.touchZoom = Math.trunc( this.touchStartZoom * (this.touchDist / this.touchStartDist) )\r\n\t\t\tlet dx = Math.trunc( this.touchPt.x - this.touchStartPt.x )\r\n\t\t\tlet dy = Math.trunc( this.touchPt.y - this.touchStartPt.y )\r\n\t\t\t//msg( `${this.panStartPt.x},${this.panStartPt.y} + ${dx},${dy} ` )\r\n\t\t\t\r\n\t\t\tif (tH && tH.updt)\r\n\t\t\t\ttH.updt.push( { zm: this.touchZoom, dy: this.panStartPt.y + dy, dx: this.panStartPt.x + dx } )\r\n\t\t\tthis.setZoom( this.touchZoom, this.panStartPt.y + dy, this.panStartPt.x + dx )\r\n\t\t}\r\n\t}\r\n\ttouchstart( evt ) {\t\t// touch evt\r\n\t\t//msg( `T${evt.touches.length} ${evt.target.id}` )\r\n\t\tthis.clearSel()\r\n\t\tthis.clearTouch()\r\n\t\tif ( evt.touches.length > 1 ){\r\n\t\t\tthis.touchZooming = true \r\n\t\t\tevt.preventDefault()\r\n\t\t\t//msg( 'TZ', true )\r\n\t\t} else\r\n\t\t\tthis.longtouchtimer = setTimeout( this.onlongtouch.bind(this,evt), this.touchduration ); \r\n\t}\r\n\tclearTouch(){\t\t\t// touch evt\r\n\t\tif (this.longtouchtimer != 0){\r\n\t\t\tclearTimeout( this.longtouchtimer ) \r\n\t\t\tthis.longtouchtimer = 0\r\n\t\t}\r\n\t}\r\n\ttouchend( evt ) {\t\t// touch evt\r\n\t\tthis.clearTouch() //stops short touches from firing the event\r\n\t\tif ( this.touchZooming ){\r\n\t\t\t//msg( `E${evt.touches.length}` )\r\n\t\t\tif ( evt.touches.length == 0 ){\r\n\t\t\t\tthis.touchZooming = false\r\n\t\t\t\tthis.touchStartDist = 0\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet tgt = evt.target;\r\n\t\tif ( !tgt.id.startsWith('m') || tgt.id.length != 5) return\r\n\t\tevt.preventDefault()\r\n\t\tlet y = Number(tgt.id.substr(1,2)), x = Number(tgt.id.substr(3,4))\r\n\t\tthis.doGridClick( y, x, false )\r\n\t}\r\n\tonlongtouch( evt ){\t\t// touch evt\r\n\t\tthis.longtouchtimer = 0\r\n\t\tlet tgt = evt.target;\r\n\t\tif ( !tgt.id.startsWith('m') || tgt.id.length != 5) return\r\n\t\tif ( !HUI.hasClass( tgt, 'secret') && !HUI.hasClass( tgt, 'marked' ) ) return\r\n\t\tlet y = Number(tgt.id.substr(1,2)), x = Number(tgt.id.substr(3,4))\r\n\t\tnavigator.vibrate( 60 )\r\n\t\tthis.markCell( y, x )\r\n\t\tevt.preventDefault()\r\n\t}\r\n\tupdatePos(){\t\t\t// simulating touch: adj from controls\r\n\t\tlet zm = this.dbg.getVal('zm:')\r\n\t\tlet dx = this.dbg.getVal('dx:')\r\n\t\tlet dy = this.dbg.getVal('dy:')\r\n\t\tthis.setZoom( zm, dy, dx )\r\n\t}\t\r\n\tsetZoom( zm, dy,dx ){\t// set screen zoom\r\n\t\tzm = Number(zm)\r\n\t\tdy = Number(dy)\r\n\t\tdx = Number(dx)\r\n\t//\tmsg( `${dx},${dy}  ${zm}%` )\r\n\t\tlet data = HUI.gEl('data')\r\n\t\tlet gsize = { x: data.clientWidth, y: data.clientHeight }\r\n\t\tlet scrsize = { x: this.windowW*100/zm, y: this.windowH*100/zm - this.headerH }\r\n\t\tlet zf = 100/zm\r\n\t\tlet minx = scrsize.x - gsize.x*1.2 - 20\r\n\t\tlet miny = scrsize.y - gsize.y*1.2 - 20\r\n\t\t\r\n\t\tif ( this.dbg.getVal( 'TM' ) ) \r\n\t\t\tmsg( ` [${Math.round(scrsize.x)}->${Math.round(minx)}, ${Math.round(scrsize.y)}->${Math.round(miny)}]` )\r\n\t//msg( `${this.windowH}*${zf.toFixed(2)}-${this.headerH}=${Math.round(scrsize.y)} ? ${gsize.y} `)\r\n\t\tif ( scrsize.y < gsize.y )\r\n\t\t\tdy = Math.round( this.clip( dy, miny, 20 ) )\r\n\t\telse dy = 10\r\n\t\tif ( scrsize.x < gsize.x )\r\n\t\t\tdx = Math.round( this.clip( dx, minx, 20 ) )\r\n\t\telse dx = 10\r\n\t\t\r\n\t\tdata.style.zoom = `${zm}%`\r\n\t\tdata.style.top = `${dy}px`\r\n\t\tdata.style.left = `${dx}px`\r\n\t\t//msg( ` => ${dx},${dy}  ${zm}%`, true )\r\n\t\t\r\n\t\tlet hdr = HUI.gEl('header')\r\n\t\tlet hdrw = Math.round( hdr.getBoundingClientRect().width )\r\n\t\tlet dtaw = Math.round( data.getBoundingClientRect().width )\r\n\t\t//msg( ` hW,dW:${hdrw},${dtaw}` )\r\n\t\tlet hzm = Math.round( dtaw*100/hdrw )\r\n\t\tif (hzm < 100) hzm = 100\r\n\t\thdr.style.zoom = `${hzm}%` \r\n\t\t//msg( ` & ${hzm}%`, true )\r\n\t}\r\n\r\n\tkeydown( evt ){\t\t\t// key: cmds to select & click\r\n\t\tlet y = this.selY\r\n\t\tlet x = this.selX\r\n\t\tswitch ( evt.key ){\r\n\t\t\tcase '*':\r\n\t\t\t\tif ( evt.ctrlKey && evt.altKey ) \r\n\t\t\t\t\tHUI.setClass( 'guiG0', 'hide' )\r\n\t\t\t\tbreak\r\n\t\t\tcase 'ArrowUp':\r\n\t\t\tcase 'i':\r\n\t\t\t\tthis.selCell( this.clipY( y-1 ), x )\r\n\t\t\t\treturn\r\n\t\t\tcase 'ArrowDown':\r\n\t\t\tcase 'k':\t\r\n\t\t\t\tthis.selCell( this.clipY( y+1 ), x )\r\n\t\t\t\treturn\r\n\t\t\tcase 'ArrowLeft': \r\n\t\t\tcase 'j':\t\r\n\t\t\t\tthis.selCell( y, this.clipX( x-1 ))\r\n\t\t\t\treturn\r\n\t\t\tcase 'ArrowRight':\r\n\t\t\tcase 'l':\t\r\n\t\t\t\tthis.selCell( y, this.clipX( x+1 ))\r\n\t\t\t\treturn\r\n\t\t\tcase 's':\r\n\t\t\t\t//this.randSafeClick()\r\n\t\t\t\treturn\r\n\t\t\tcase 'r':\r\n\t\t\t\t//this.resetField()\r\n\t\t\t\treturn\r\n\t\t\tcase 'm':\t\r\n\t\t\t\tthis.markCell( y, x )\r\n\t\t\t\treturn\r\n\t\t\tcase ' ':\r\n\t\t\t\tthis.doGridClick( y, x, false )\r\n\t\t\t\treturn\r\n\t\t\tdefault:\r\n\t\t}\r\n\t}\r\n\tclearSel(){\t\t\t\t// key: clear keybd selection\r\n\t\tif ( this.selY == undefined || this.selX == undefined ) return\r\n\t\tHUI.setClass( this.gID( this.selY, this.selX ), ['sel','hint'], false )\t\t\r\n\t}\r\n\tselCell( y, x, hint ){\t\t// key: select cell\r\n\t\tthis.clearSel()\r\n\t\tthis.selY = y\r\n\t\tthis.selX = x\r\n\t\tHUI.setClass( this.gID( this.selY, this.selX ), hint? 'hint':'sel', true )\r\n\t}\r\n\r\n//*************** hidden abilities\r\n\tplay( dly ){\t\t\t// auto-play from current state\r\n\t\tif ( dly==undefined ) dly = 10\r\n\t\tthis.game.unm = 'Auto'\r\n\t\tthis.toDo = []\r\n\t\tfor (let y=0; y<this.YSize; y++)\r\n\t\t\tfor (let x=0; x<this.XSize; x++){\r\n\t\t\t\tlet id = this.gID( y, x )\r\n\t\t\t\tif ( HUI.hasClass(id, ['cleared','freed','exploded','bombed'] )){\r\n\t\t\t\t\tif ( this.grid[y][x] == 0 )\r\n\t\t\t\t\t\tthis.markProcessed( y, x )\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.toDo.push( { y: y, x: x } )\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tthis.cntSinceChg = 0\r\n\t\tthis.playStep( dly )\r\n\t}\r\n\tplayStep( dly ){\t\t// find a move and play it\r\n\t\twhile ( this.toDo.length > 0 && this.cntSinceChg < this.toDo.length*3 ){\r\n\t\t\tlet c = this.toDo.pop()\r\n\t\t\tlet ev = this.evalCell( c, true )\t// => null or { y: x: nmines: marked: secret:[] }\r\n\t\t\t\r\n\t\t\tif ( ev != null ){\r\n\t\t\t\tmsg( `L${this.toDo.length} C${this.cntSinceChg} [${ev.y},${ev.x}] ${ev.nmines}M ${ev.marked}M ${ev.secret.length}S` )\r\n\t\t\t\tthis.selCell( c.y, c.x )\r\n\t\t\t\tif ( this.playCell( ev )){\r\n\t\t\t\t\tthis.cntSinceChg = 0\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toDo.unshift( ev )\r\n\t\t\t\t\tthis.cntSinceChg++\r\n\t\t\t\t}\r\n\t\t\t\tif ( dly > 0 )\r\n\t\t\t\t\tsetTimeout( this.playStep.bind(this, dly ), dly )\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.playStep( dly )\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tmsg( `Play stopped: L${this.toDo.length} C${this.cntSinceChg}` )\r\n\t}\r\n\tmarkProcessed( yOrId, x ){ // set as 'processed' to visually mark\r\n\t\tlet id = x==undefined? yOrId : this.gID( yOrId, x )\r\n\t\t\r\n\t\tif ( HUI.hasClass( id, 'bombed' ))\r\n\t\t\tHUI.setClass( id, 'procbombed', true )\r\n\t\telse\r\n\t\t\tHUI.setClass( id, 'processed', true )\r\n\t\t\t\r\n\t\tHUI.setClass( id, ['cleared','freed','bombed','tm','t0','t1','t2','t3','t4','t5','t6','t7','t8'], false )\r\n\t}\r\n\tplayCell( e ){\t\t\t// auto-click or mark neighbors \r\n\t\tif ( e.nmines < 0) debugger  // cleared mine!\r\n\t\tlet secret = e.secret.length\r\n\t\tlet nhidden = e.nmines - e.marked\r\n\t\tif ( nhidden > 0 && secret != nhidden ) \r\n\t\t\treturn false \t\t// not enough info yet\r\n\t\t\r\n\t\tthis.markProcessed( e.y, e.x )\r\n\t\tthis.processed[ e.y ][ e.x ] = true\r\n\t\tfor ( let n of e.secret ){\r\n\t\t\tlet nid = this.gID( n.y, n.x )\r\n\t\t\tthis.playChanged = true\r\n\t\t\tif ( nhidden==0 ){ // no unmarked mines -- clear all secret\r\n\t\t\t\tthis.clearCell( n.y, n.x, false )\r\n\t\t\t\tthis.toDo.push( { y: n.y, x: n.x } )\r\n\t\t\t} else \r\n\t\t\t\tthis.markCell( n.y, n.x )  // mark all secret cells\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\tunplayLast(){\t\t\t// undo changes from last user move\r\n\t\twhile ( this.gamesteps.length > 0 ){\r\n\t\t\tlet mv = this.gamesteps.pop()\r\n\t\t\tthis.unplay( mv.y, mv.x )\r\n\t\t\tif ( mv.user ){\r\n\t\t\t\tthis.selCell( mv.y, mv.x )\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\taddMove( y,x, user ){\t// record a game state change\r\n\t\tthis.gamesteps.push( { x: x, y: y, user: user } )\r\n\t}\r\n\tunplay( y,x ){  \t\t// revert a change to game state\r\n\t\tthis.selCell( y, x )\r\n\t\tlet id = this.gID( y, x )\r\n\t\tfor ( let cls of [ 'cleared','freed','marked','exploded','bombed','tm','t0','t1','t2','t3','t4','t5','t6','t7','t8' ] ){\r\n\t\t\tif ( HUI.hasClass( id, cls )){\r\n\t\t\t\tHUI.setClass( id, cls, false )\r\n\t\t\t\tif ( cls.charAt(0)!='t' ) this[cls]--\r\n\t\t\t}\r\n\t\t}\r\n\t\tHUI.setClass( id, 'secret', true )\r\n\t\tthis.secret++\r\n\t\tthis.showCnts()\r\n\t}\r\n\trandSafeClick(){\t\t// click a random 0 cell\r\n\t\twhile (this.blanks.length > 0){\r\n\t\t\tlet r = Math.floor( this.rand() * this.blanks.length )\r\n\t\t\tlet [y,x] = this.blanks[r]\r\n\t\t\tif ( HUI.hasClass( this.gID(y,x), 'secret' )){\r\n\t\t\t\tthis.safeClicks.push( [y,x] )\r\n\t\t\t\tthis.doGridClick( y, x, this.usedFree )\r\n\t\t\t\tfor (let i=this.blanks.length-1; i>=0; i--){\r\n\t\t\t\t\t[y,x] = this.blanks[i]\r\n\t\t\t\t\tif ( HUI.hasClass( this.gID(y,x), ['cleared','freed'] ))\r\n\t\t\t\t\t\tthis.blanks.splice( i, 1 )\r\n\t\t\t\t}\r\n\t\t\t\tthis.usedFree = true\t// further safe clicks aren't free\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t\tmsg('No more blanks!')\r\n\t\treturn false\r\n\t}\r\n\t\r\n//*************** offline calculations\r\n\tgenGame( num, nsafe ){\t\t// generate random game for 'num', using XYSize & Pct\r\n\t\tlet rkey = `CF_Gm${num}`\r\n\t\tthis.gameName = `CF_Gm${num}-${nsafe}`\r\n\t\tthis.gameNum = num\r\n\t\t//this.opt.setVal( 'Game', num )\r\n\t\tthis.XSize = this.gui.getVal('X')\r\n\t\tthis.YSize = this.gui.getVal('Y')\r\n\t\tthis.Density = this.gui.getVal('Mine%')/100\r\n\t\tthis.initCurrGame()\r\n\t\t\r\n\t\tthis.initRand( rkey )\t\t\r\n\t\tthis.initUIstate()\t// reset UI & html state for new game\r\n\r\n\t\tthis.fillField( this.Density )\t\r\n\t\tfor (let i=0; i< this.numSafe; i++){\r\n\t\t\tthis.usedFree = false\r\n\t\t\tthis.randSafeClick()\r\n\t\t}\r\n\t\tthis.showCnts()\t\t// so defined at end\r\n\t\t\r\n\t\tfor ( let i=0; i<nsafe; i++ )\r\n\t\t\tthis.randSafeClick()\r\n\t}\r\n\tfillField( pct ){\t\t\t// generate game grid based on random #gen\r\n\t\tconst cellTxt = [ '*',     '',   '1',   '2',   '3',   '4',   '5',   '6',  '7',    '8',  '9' ]\t\t\r\n\r\n\t\tlet xc = this.XSize\r\n\t\tlet yc = this.YSize\r\n\t\tthis.resetGrid( )\r\n\t\t\r\n\t\tfor (let y=0; y<yc; y++){\r\n\t\t\tthis.grid[ y ] = []\r\n\t\t\tthis.processed[ y ] = []\r\n\t\t\tfor (let x=0; x < xc; x++){\r\n\t\t\t\tthis.processed[ y ][ x ] = false\r\n\t\t\t\tif ( this.rand() < pct ){\r\n\t\t\t\t\tthis.grid[y][x] = -1\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.grid[y][x] = 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// count #mines adjacent to each cell\r\n\t\tfor (let y=0; y<yc; y++)\t\r\n\t\t\tfor (let x=0; x<xc; x++)\r\n\t\t\t\tif (this.grid[y][x] >= 0){\t// not a mine\r\n\t\t\t\t\tfor (let ny=y-1; ny<y+2; ny++)\r\n\t\t\t\t\t\tfor (let nx=x-1; nx<x+2; nx++){\r\n\t\t\t\t\t\t\tif ( this.grid[ny][nx] == -1 )  // indexing past edge gets undefined, so not a mine\r\n\t\t\t\t\t\t\t\tthis.grid[y][x]++\t\t// count the mines\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\tlet html = ''\r\n\t\tthis.secret = xc * yc\r\n\t\tfor (let y=0; y<yc; y++){\r\n\t\t\tfor (let x=0; x<xc; x++){\r\n\t\t\t\tlet idx = this.grid[y][x]+1\t\t// 0..9\r\n\t\t\t\tlet id = this.gID(y,x)\r\n\t\t\t\tif ( this.grid[y][x] < 0 ) \r\n\t\t\t\t\tthis.mines++\t\t\t// count mines\r\n\t\t\t\tif ( this.grid[y][x]==0 ) \r\n\t\t\t\t\tthis.blanks.push( [ y,x ] )\t// list of blank cells\r\n\t\t\t\thtml += `<span id=\"${id}\" class=\"grd secret\"> ${cellTxt[idx]} </span>`\r\n\t\t\t} \r\n\t\t\thtml += '<br>';\r\n\t\t}\r\n\t\tHUI.gEl('data').innerHTML = html;\r\n\t}\r\n\tfindWinnable(){  \t\t\t// eval games from 'GmStart'..+Batch & sv winnable games as 'XGxxxx'\r\n\t\tthis.showPanels( 'Playing', 'data' )\r\n\t\tlet gmnum = Number( this.mng.getVal( 'GmStart' ))\r\n\t\tlet mxG = gmnum + Number( this.mng.getVal('Batch') )\r\n\t\tthis.mng.setVal( 'GmStart', mxG )\r\n\t\tasync function evalGameLoop(){\r\n\t\t\tthis.maxGms.seed = gmnum\r\n\t\t\tawait this.evalGame( gmnum )\r\n\t\t\tgmnum++\r\n\t\t\tif ( gmnum < mxG )\r\n\t\t\t\tsetTimeout( evalGameLoop.bind(this), 100 )\r\n\t\t}\r\n\t\tsetTimeout( evalGameLoop.bind(this), 100 )\t\r\n\t}\r\n\tevalGame( num ){  \t\t\t// find lowest sequence of 'free clicks' that results in winnable game\r\n\t\tthis.genGame( num, 0 )\r\n\t\tlet maxSafe = 0\r\n\t\twhile ( this.randSafeClick() ) \t// fails if no more 0 cells\r\n\t\t\tmaxSafe++\r\n\t\t\r\n\t\tlet lowestwinnable = -1\r\n\t\tfor ( let nRS = maxSafe; nRS >= 0; nRS-- ){\r\n\t\t\tthis.genGame( num, nRS )\r\n\t\t\r\n\t\t\tthis.PlayTest = true\r\n\t\t\tthis.play( 0 )\t\t\t\t// see if this config is winnable\r\n\t\t\tthis.PlayTest = false\r\n\t\t\t\r\n\t\t\tif ( this.secret == 0 ) \r\n\t\t\t\tlowestwinnable = nRS\r\n\t\t\telse\r\n\t\t\t\tbreak   // found a non-winnable version\r\n\t\t}\r\n\t\tif ( lowestwinnable < 0 ){\r\n\t\t\tmsg( `Game ${num}-${maxSafe} non-winnable`)\r\n\t\t\tif ( num > this.maxunwinnable ) \r\n\t\t\t\tthis.maxunwinnable = num\r\n\t\t} else {\r\n\t\t\tthis.calcQuest( num, lowestwinnable )\t// mark non-essential cells as '?' & save game\r\n\t\t\tmsg( `Game ${num}-${lowestwinnable} is winnable` )\r\n\t\t}\r\n\t}\r\n\tcalcQuest( gmnum, nsafe ){  // play game & put non-critical ('?') cells in quests[]\r\n\t\tthis.genGame( gmnum, nsafe )\r\n\t\t\r\n\t\tthis.PlayTest = true\t// disable game recording & UI\r\n\t\tthis.play( 0 ) // play game & mark cells not needed to win as '?'\r\n\t\tthis.clearSel()\r\n\t\tthis.PlayTest = false\r\n\t\tlet classes = [\r\n\t\t\t'cleared','freed','bombed','marked','processed', \r\n\t\t\t'tm','t0','t1','t2','t3','t4','t5','t6','t7','t8'\r\n\t\t]\r\n\t\t// remember ? cells & reset to secret for initial state\r\n\t\tthis.quests = []\r\n\t\tfor (let y=0; y<this.YSize; y++)\r\n\t\t\tfor (let x=0; x<this.XSize; x++){\r\n\t\t\t\tlet id = this.gID( y, x )\r\n\t\t\t\tif ( HUI.gEl(id).innerText=='?' ) \r\n\t\t\t\t\tthis.quests.push( [ y,x ] )\r\n\t\t\t}\r\n\t\r\n\t\tthis.genGame( gmnum, nsafe )\t// reset to game start\r\n\t\tfor ( let qst of this.quests )\r\n\t\t\tHUI.gEl( this.gID( qst[0], qst[1] )).innerText = '?'\t// and add ?'s\r\n\r\n\t\tthis.saveGame() // save state as G000${this.nxtG}\r\n\t}\r\n\tgameState(){\t\t\t\t// => encoded state of cells as string []\r\n\t\tlet st = []\r\n\t\tlet encoder = Array.from( this.gridEncode )\r\n\t\tfor ( let y=0; y < this.YSize; y++ ){\r\n\t\t\tlet s = ''\r\n\t\t\tfor ( let x=0; x < this.XSize; x++ ){\r\n\t\t\t\tlet gval = this.grid[y][x]\r\n\t\t\t\tlet id = this.gID(y,x)\r\n\t\t\t\tlet isQuest = HUI.gEl( id ).innerText.trim()=='?'\r\n\t\t\t\tlet isSecret = HUI.hasClass( id, 'secret' )\r\n\t\t\t\t// idx = (this.grid[y][x]+1) * ((innerText=='?' 1 : 2 ) + (hasClass('secret')? 2 : 0) )\r\n\t\t\t\tlet idx = gval+1\t\t\t// !Q !S => 0..9\r\n\t\t\t\tif ( isQuest ) idx += 10\t// Q !S  => 10..19\r\n\t\t\t\tif ( isSecret ) idx += 20\t// !Q S => 20..29,  Q S => 30..39\r\n\t\t\t\t\r\n\t\t\t\ts += encoder[ idx ]\r\n\t\t\t}\r\n\t\t\tst.push( s )\r\n\t\t}\r\n\t\treturn st\r\n\t}\r\n\tsaveGame( ){  \t\t\t\t// save current game state to DB as this.gameID\r\n\t\tlet gmdef = { \r\n\t\t\tid: this.gameID, G: this.gameName, GNum: this.gameNum, \r\n\t\t\tnS: this.secret, nQ: this.quests.length, \r\n\t\t\tXSz: this.XSize, YSz: this.YSize, st: this.gameState(),\r\n\t\t\tStats: {   // game stats updated by each winner\r\n\t\t\t\tbestTime: this.game.nseconds,\r\n\t\t\t\tbestUsers: [],\r\n\t\t\t\tfirstDate: '',\r\n\t\t\t\tBins: [],\t\t\t// cnts of 0E0H games by time\r\n\t\t\t\r\n\t\t\t\tcompleteCnt: 0,\t\t// total times game completed \r\n\t\t\t\tperfectCnt:  0,\t\t// total OEOH completions\r\n\t\t\t\r\n\t\t\t\tCnt: [  [ 0, 0, 0 ], // 0E cnts by H (0,1,2)\r\n\t\t\t\t\t\t[ 0, 0, 0 ], // 1E cnts by H\r\n\t\t\t\t\t\t[ 0, 0, 0 ]  // 2E cnts by H\r\n\t\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// approx game difficulty by number of secret cells\r\n\t\tconst diffCnt = [ [ 100, 'E'], [ 200, 'M'], [ 262, 'H' ], [ 1000, 'X' ] ]\r\n\t\tif ( this.XSize * this.YSize < 400 )\r\n\t\t\tgmdef.diff = 'E'\r\n\t\telse {\r\n\t\t\tfor ( let cntCls of diffCnt )\r\n\t\t\t\tif ( gmdef.nS <= cntCls[0] ){\r\n\t\t\t\t\tgmdef.diff = cntCls[1]\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet nxtCnt = this.maxGms[ gmdef.diff ]\r\n\t\tgmdef.id = `${gmdef.diff}${this.pad4(nxtCnt)}`\r\n\t\tthis.maxGms[ gmdef.diff ]++\r\n\t\t\r\n\t\tthis.setGameDB( gmdef )\r\n\t\tmsg( `Saved ${gmdef.id}` )\r\n\t\tconsole.log( `Saved ${gmdef.id}` )\r\n\t\t\r\n\t\tthis.loadGameDef( gmdef )\t\t\r\n\t}\r\n\tasync setGameDB( gmdef ){\t// write gmdef to KVdb\r\n\t\tawait this.bucket.set( gmdef.id, JSON.stringify( gmdef ))\r\n\t\tawait this.bucket.set( 'maxGms', JSON.stringify( this.maxGms ) )\r\n\t}\r\n\r\n}\r\nvar jsApp = new App( 'ClearField  Jul2023.01' )\r\n"],"names":["module","exports","e","n","r","i","s","u","a","o","f","h","c","d","l","$","y","M","name","weekdays","split","months","ordinal","t","m","String","length","Array","join","v","z","utcOffset","Math","abs","floor","date","year","month","clone","add","ceil","p","w","D","ms","Q","toLowerCase","replace","g","_","S","args","arguments","O","locale","$L","utc","$u","x","$x","$offset","this","parse","prototype","$d","Date","NaN","test","match","substring","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","apply","slice","$locale","weekStart","$set","min","daysInMonth","get","Number","round","subtract","format","invalidDate","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","T","forEach","extend","$i","isDayjs","en","Ls","dayOfYear","factory","fetch","window","KVdb","Bucket","constructor","id","access_token","_fetchParams","opts","params","headers","type","async","key","BASE_URL","then","checkStatus","res","text","value","method","body","increment","URLSearchParams","skip","append","limit","prefix","reverse","values","json","permissions","ttl","localStorage","KVdbWebStorage","ok","Error","status","statusText","bucket","index","list","keyName","catch","err","keyValue","delete","keys","waiting","map","Promise","all","executeCallback","promise","callback","result","error","localForageDriver","LOCALFORAGE_DRIVER","WebStorage","installLocalForageDriver","localforage","_driver","_support","_initStorage","options","dbInfo","serializer","getSerializer","_dbInfo","resolve","_config","deletes","deserialize","iterator","keyValues","k","originalValue","reject","serialize","newValue","defineDriver","bind","globalObject","self","getGlobal","Headers","Request","Response","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","getter","__esModule","definition","Object","defineProperty","enumerable","globalThis","Function","obj","prop","hasOwnProperty","HUI","static","idOrEl","el","document","getElementById","HTMLElement","elId","evttype","fn","gEl","addEventListener","grps","getElementsByClassName","grpAll","classList","toggle","down","contains","grp","parentElement","querySelector","remove","evt","target","html","innerHTML","className","addListener","setClass","tag","cls","txt","createElement","innerText","nms","selected","sel","newEl","opt","nopt","newOpt","appendChild","nm","enable","hascls","selectedIndex","fnm","ext","baseNm","idx","indexOf","tk","dayjs","dot","GUI","parId","gnm","str","hide","level","idcnt","par","grpid","guiCnt","grpnm","bdy","setHidden","items","nxtId","clearGroup","hidden","openFn","addGroup","gui","addItem","resetGroup","addBreak","findItm","itm","getVal","typ","checked","setVal","val","showVal","enab","tagName","lbl","push","lblcls","newSel","lel","addSelector","filelist","addLine","addCategory","addCheckbox","addButton","addNumber","addValue","addText","addFile","accept","files","msg","info","console","log","title","detail","buttons","defaultId","returnValue","bd","btns","b","button","btn","showModal","showDialog","setPrototypeOf","__proto__","TypeError","create","_xfnv1a","imul","charCodeAt","next","sfc32","mulberry32","xoshiro128ss","prng","generator","_initializeGenerator","wrap","random","App","Version","registerSW","getItem","setItem","UserName","currApp","initMenu","maxunwinnable","bucketKey","writeKey","initDB","categories","E","initGridEncoder","errCnt","initListeners","showHelp","nextGame","genHint","quitGame","showStats","showRecords","showMenu","tgt","preventDefault","gridClick","touchstart","passive","touchend","touchmove","keydown","resizeApp","gridEncode","decodeGridVal","decodeQuest","decodeSecret","showGames","play","det","mng","findWinnable","dbg","updatePos","chooseColor","unplayLast","calcQuest","showPanels","hdrid","lowerid","navigator","serviceWorker","register","registration","registrationError","windowW","innerWidth","windowH","innerHeight","headerH","clientHeight","userID","nextUser","getDBObj","pad4","userRecords","numFirsts","numBests","maxGms","X","seed","UserStats","ststr","startsWith","JSON","gamesStarted","cCnt","pCnt","cStrk","pStrk","stringify","initDaily","randgen","Rand","games","nE","nM","nH","nX","concat","Daily","trunc","gm","splice","updateUser","gameisover","ng","gmstr","unm","initRand","rand","padStart","pad2","clip","max","clipY","YSize","clipX","XSize","resetGrid","grid","gamesteps","blanks","processed","safeClicks","secret","cleared","exploded","bombed","marked","freed","mines","wrong","right","initCurrGame","game","ver","gameName","errors","hints","nseconds","startClock","enableClock","updateClock","timeStr","nsec","sec","hr","now","clockStart","clockRunning","clockId","setInterval","clearInterval","refreshStats","gmdef","Stats","firstDate","bestTime","showCompleted","perfect","newRecord","gameID","pctSlower","pctMoreErrs","pctMoreHints","initUIstate","csz","cellSize","data","style","width","height","longtouchtimer","touchduration","touchZooming","touchDist","touchStartDist","selX","selY","usedFree","dataW","clientWidth","dataH","hdrH","zmw","zmh","touchZoom","setZoom","loadGameDef","XSz","cellTxt","questPct","G","YSz","cells","from","st","encoding","gv","gID","showCnts","currDiff","GCstr","gmCtrs","gmNum","fetchGameDef","poss","ev","evalCell","nhidden","nmines","selCell","cell","setQ","hasClass","adj","adjCells","secNbrs","nid","minMax","mxv","xmin","xmax","ymin","ymax","dy","dx","neighbors","clearSecret","checkCnt","clearCell","safe","user","addMove","explodeCell","vibrate","bombCell","markCell","doGridClick","cntGrid","cnt","gameOver","incBin","BinSz","Bins","binmax","fasterCnt","PlayTest","gSt","completeCnt","Cnt","moreErrCnt","j","moreHintCnt","prevBest","perfectCnt","bestUsers","totPerfect","setDBObj","decrBests","defval","objstr","uid","uStats","stopPropagation","removeItem","start","dt","end","toFixed","score","touchHist","tH","panStartPt","touchStartPt","touchStartZoom","updt","zm","clearSel","gameIsOver","substr","cid","nMoves","explodeStep","spreadClear","todo","y2","x2","pop","nbrs","id2","setTimeout","touches","t1","item","t2","touchPt","clientX","clientY","xd","yd","sqrt","getBoundingClientRect","lx","left","ty","top","clearTouch","onlongtouch","clearTimeout","gsize","scrsize","minx","miny","zoom","hdr","hdrw","dtaw","hzm","ctrlKey","altKey","hint","dly","toDo","markProcessed","cntSinceChg","playStep","playCell","unshift","yOrId","playChanged","mv","unplay","charAt","randSafeClick","genGame","num","nsafe","rkey","gameNum","Density","fillField","numSafe","pct","xc","yc","ny","nx","gmnum","mxG","evalGameLoop","evalGame","maxSafe","lowestwinnable","nRS","quests","qst","saveGame","gameState","encoder","gval","trim","GNum","nS","nQ","diffCnt","cntCls","nxtCnt","setGameDB"],"sourceRoot":""}